<div class="ecs_vm_detail_snapshots" ng-controller="ecs.vm.detail.snapshots.ctrl">
    <div ng-if="hasVmAdvanceOperateRight">
        <tiny-button id="create.id" text="create.text" click="create.click()" class="major-btn"></tiny-button>
        <tiny-button id="restore.id" text="restore.text" click="restore.click()" disable="selectNode==null"></tiny-button>
        <tiny-button id="delete.id" text="delete.text" click="delete.click()" disable="selectNode==null"></tiny-button>
    </div>

    <div class="row-fluid margin-top-beautifier">
        <div class="span6">
            <tiny-tree id="tree.id" setting="tree.setting" values="tree.values" width="tree.width"></tiny-tree>
        </div>

        <div class="span6 ecs_vm_detail_snapshots_detail">
            <tiny-formfield>
                <tiny-item label="label.name">
                    <div ng-if="!name.modifying">
                        <span ng-bind="detail.name" title="{{detail.name}}" class="textOverflow maxWidth200"></span>
                        <a ng-if="hasVmAdvanceOperateRight && selectNode" class="btn-link" ng-click="name.clickModify()">
                            <img src="../theme/default/images/gm/edit.gif">
                        </a>
                    </div>
                    <div ng-if="name.modifying">
                        <tiny-textbox id="name.textBoxId" blur="name.blur()" keypressfn="name.keypressfn" width="150" validate="name.validate"></tiny-textbox>
                    </div>
                </tiny-item>
                <tiny-item label="label.id">
                    <span ng-bind="detail.id"></span>
                </tiny-item>
                <tiny-item label="label.memorySnapshot">
                    <span ng-bind="detail.isMemorySnapStr"></span>
                </tiny-item>
                <tiny-item label="label.backupSnapshot">
                    <span ng-bind="detail.backupSnapshot"></span>
                </tiny-item>
                <tiny-item label="label.status">
                    <span ng-bind="detail.statusStr"></span>
                </tiny-item>
                <tiny-item label="label.createTime">
                    <span ng-bind="detail.createTime"></span>
                </tiny-item>
                <tiny-item label="label.description">
                    <div ng-if="!description.modifying">
                        <span ng-bind="detail.description" title="{{detail.description}}" class="textOverflow maxWidth200"></span>
                        <span ng-if="hasVmAdvanceOperateRight && selectNode" class="btn-link" ng-click="description.clickModify()">
                            <img src="../theme/default/images/gm/edit.gif">
                        </span>
                    </div>
                    <div ng-if="description.modifying">
                        <tiny-textbox id="description.textBoxId" blur="description.blur()" keypressfn="description.keypressfn"
                                      validate="description.validate" type="description.type" width="150" height="50"></tiny-textbox>
                    </div>
                </tiny-item>
            </tiny-formfield>
        </div>
    </div>
</div>

<script>
require(['app/business/ecs/controllers/vm/snapshot/snapshotsCtrl'],
    function(snapshotsCtrl) {
        var dep = ['ng', 'wcc', snapshotsCtrl.name];
        dep.unshift(["$provide",
            function($provide) {
                $provide.value("$rootElement", $(".ecs_vm_detail_snapshots"));
            }
        ]);
        var $injector = angular.injector(dep);
        $injector.invoke(function($compile, $rootScope) {
            $compile($(".ecs_vm_detail_snapshots"))($rootScope);
            $rootScope.$digest();
        });
    });
</script>
