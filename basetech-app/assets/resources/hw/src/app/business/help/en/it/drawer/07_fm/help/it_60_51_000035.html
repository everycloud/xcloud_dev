
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="NAT">
<meta name="abstract" content="">
<meta name="description" content="">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="it_60_51_000035">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../public_sys-resources/ExpandCollapse.js"></script>
<title>NAT</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="it_60_51_000035"></a><a name="it_60_51_000035"></a>


<h1 class="topictitle1">NAT</h1>


<div><p></p>

<div class="section"><h4 class="sectiontitle">Overview</h4><p id="it_60_51_000035__d749e13"><a name="it_60_51_000035__d749e13"></a><a name="d749e13"></a>Network address translation (NAT) is used to translate between service
private IP addresses and public IP addresses. Compared with the elastic
IP address service, the NAT service uses less public IP addresses
when interconnecting private networks with public networks. Therefore,
the NAT service can be used in scenarios in which public IP address
resources are limited.</p>
</div>

<div class="section"><h4 class="sectiontitle">Principles</h4><p><strong>Destination network address translation (DNAT)</strong></p>
<p>DNAT
is used to establish a mapping between private IP addresses and public
IP addresses, allowing public network users to access internal services
in a private network.</p>
<p>Normally, the internal network of an enterprise
uses private IP addresses for internal communication, and it only
uses a public IP address as its network egress. Therefore, if a server
in the internal server needs to provide services for public network
users, public network users will have no access to the server because
no route to the server is available on the public network.</p>
<div class="p">With
DNAT, the system can map public IP addresses on the internal server
using a router. When a public network user initiates a request to
connect to the internal server, the request is triggered by the public
IP address mapped on the router, and then the router translates the
public IP address (destination IP address) into the private IP address
of the server. In this manner, the public network user can use services
provided by the internal server. <a href="#it_60_51_000035__d749e30">Figure 1</a> shows
this process.<div class="fignone" id="it_60_51_000035__d749e30"><a name="it_60_51_000035__d749e30"></a><a name="d749e30"></a><span class="figcap"><b>Figure 1 </b>DNAT process</span>

<br><span><img src="fig/fig_it_60_51_000011_3.png"></span></div>
</div>
<p><strong>Source network address translation (SNAT)</strong></p>
<p>SNAT is used
to translate the source IP address contained in an IP packet into
another public IP address, allowing internal users to access external
networks using a shared public IP address.</p>
<p>Normally, the internal
network of an enterprise uses private IP addresses for internal communication,
and it only uses a public IP address as its network egress. Therefore,
when an internal network user sends a request to access an external
network server, the access request packet can be sent to the server
through the internal network egress, but the response packet from
the server cannot be sent to the internal user, because no route to
the private IP address of the internal is available on the public
network.</p>
<p>With SNAT, the system translates the private IP address
(source IP address) of the internal user into a public IP address.
When the external server sends out a response packet, the packet is
first sent to the router, and then the router forwards the packet
to the internal user, allowing private network users to access services
provided by external networks.</p>
</div>

<div class="section"><h4 class="sectiontitle">Configuration Process</h4><p><a href="#it_60_51_000035__fig_hardNAT">Figure 2</a> shows the process for configuring
the DNAT and SNAT functions on a hardware firewall.</p>
<div class="fignone" id="it_60_51_000035__fig_hardNAT"><a name="it_60_51_000035__fig_hardNAT"></a><a name="fig_hardNAT"></a><span class="figcap"><b>Figure 2 </b>Configuration process</span>

<br><span><img src="fig/fig_it_60_51_000035_2.png"></span></div>
<p><a href="#it_60_51_000035__tab_02">Table 1</a> describes the involved tasks.</p>

<div class="tablenoborder"><a name="it_60_51_000035__tab_02"></a><a name="tab_02"></a><table cellpadding="4" cellspacing="0" summary="" id="it_60_51_000035__tab_02" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Task description</caption>
<thead align="left">
<tr>
<th class="cellrowborder" valign="top" width="27.864583333333336%" id="mcps1.3.3.5.2.4.1.1"><p>Task</p>
</th>

<th class="cellrowborder" valign="top" width="41.40625000000001%" id="mcps1.3.3.5.2.4.1.2"><p>Description</p>
</th>

<th class="cellrowborder" valign="top" width="30.729166666666668%" id="mcps1.3.3.5.2.4.1.3"><p>Web Client Navigation</p>
</th>

</tr>

</thead>

<tbody>
<tr>
<td class="cellrowborder" valign="top" width="27.864583333333336%" headers="mcps1.3.3.5.2.4.1.1 "><p>Apply for a router.</p>
</td>

<td class="cellrowborder" valign="top" width="41.40625000000001%" headers="mcps1.3.3.5.2.4.1.2 "><p>Apply for a router for the VPC to support
elastic IP address, network address translation (NAT), access control
list (ACL), and virtual private network (VPN) services in the VPC.</p>
</td>

<td class="cellrowborder" valign="top" width="30.729166666666668%" headers="mcps1.3.3.5.2.4.1.3 ">Choose <span class="menucascade"><b><span class="uicontrol">VPC</span></b> &gt; <b><span class="uicontrol">My
VPC</span></b></span>, select a VPC, and select <span class="uicontrol"><b>Routers</b></span>.</td>

</tr>

<tr>

<td class="cellrowborder" valign="top" width="27.864583333333336%" headers="mcps1.3.3.5.2.4.1.1 "><p>Create a routed network.</p>
</td>

<td class="cellrowborder" valign="top" width="41.40625000000001%" headers="mcps1.3.3.5.2.4.1.2 "><p id="it_60_51_000035__p_routedNAT"><a name="it_60_51_000035__p_routedNAT"></a><a name="p_routedNAT"></a>FusionManager uses a router to translate
between private IP addresses and public IP addresses in a routed network.
Therefore, a routed network must be created for configuring the NAT
service.</p>
</td>

<td class="cellrowborder" valign="top" width="30.729166666666668%" headers="mcps1.3.3.5.2.4.1.3 ">Choose <span class="menucascade"><b><span class="uicontrol">VPC</span></b> &gt; <b><span class="uicontrol">My
VPC</span></b></span>, select a VPC, and choose <span class="menucascade"><b><span class="uicontrol">Network</span></b> &gt; <b><span class="uicontrol">Network</span></b></span>.</td>

</tr>

<tr>

<td class="cellrowborder" valign="top" width="27.864583333333336%" headers="mcps1.3.3.5.2.4.1.1 "><p>Apply for
public IP addresses.</p>
</td>

<td class="cellrowborder" valign="top" width="41.40625000000001%" headers="mcps1.3.3.5.2.4.1.2 "><p>Before using a public IP address, ensure that you have applied for
the public IP address from the FusionManager public IP address pool
for the VPC.</p>
</td>

<td class="cellrowborder" valign="top" width="30.729166666666668%" headers="mcps1.3.3.5.2.4.1.3 ">Choose <span class="menucascade"><b><span class="uicontrol">VPC</span></b> &gt; <b><span class="uicontrol">My VPC</span></b></span>, select a VPC, and choose <span class="menucascade"><b><span class="uicontrol">Network</span></b> &gt; <b><span class="uicontrol">Public IP Address</span></b></span>.</td>

</tr>

<tr>

<td class="cellrowborder" valign="top" width="27.864583333333336%" headers="mcps1.3.3.5.2.4.1.1 "><p>Create a VM or apply for a private IP address.</p>
</td>

<td class="cellrowborder" valign="top" width="41.40625000000001%" headers="mcps1.3.3.5.2.4.1.2 "><p id="it_60_51_000035__p_private"><a name="it_60_51_000035__p_private"></a><a name="p_private"></a>The DNAT function can be enabled for a network
interface card (NIC) of a VM or a private IP address in a routed network.</p>
</td>

<td class="cellrowborder" valign="top" width="30.729166666666668%" headers="mcps1.3.3.5.2.4.1.3 "><p><strong>Create VMs.</strong></p>
Choose <span class="menucascade"><b><span class="uicontrol">Resources</span></b> &gt; <b><span class="uicontrol">VMs</span></b></span>.<p><strong>Apply for private IP addresses.</strong></p>
Choose <span class="menucascade"><b><span class="uicontrol">VPC</span></b> &gt; <b><span class="uicontrol">My VPC</span></b></span>, select a VPC, and choose <span class="menucascade"><b><span class="uicontrol">Network</span></b> &gt; <b><span class="uicontrol">Network</span></b></span>.</td>

</tr>

<tr>

<td class="cellrowborder" valign="top" width="27.864583333333336%" headers="mcps1.3.3.5.2.4.1.1 "><p>Apply for the DNAT service.</p>
</td>

<td class="cellrowborder" valign="top" width="41.40625000000001%" headers="mcps1.3.3.5.2.4.1.2 "><p id="it_60_51_000035__p_appdnat"><a name="it_60_51_000035__p_appdnat"></a><a name="p_appdnat"></a>Apply for the DNAT service for a VM or private
IP address.</p>
</td>

<td class="cellrowborder" valign="top" width="30.729166666666668%" headers="mcps1.3.3.5.2.4.1.3 ">Choose <span class="menucascade"><b><span class="uicontrol">VPC</span></b> &gt; <b><span class="uicontrol">My
VPC</span></b></span>, select a VPC, and choose <span class="menucascade"><b><span class="uicontrol">Network</span></b> &gt; <b><span class="uicontrol">DNAT</span></b></span>.</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="27.864583333333336%" headers="mcps1.3.3.5.2.4.1.1 "><p>Enable SNAT.</p>
</td>

<td class="cellrowborder" valign="top" width="41.40625000000001%" headers="mcps1.3.3.5.2.4.1.2 "><p id="it_60_51_000035__p_enable"><a name="it_60_51_000035__p_enable"></a><a name="p_enable"></a>After a route network is created, enable the
SNAT function for the network. Then, VMs in the routed network can
access the public network.</p>
</td>

<td class="cellrowborder" valign="top" width="30.729166666666668%" headers="mcps1.3.3.5.2.4.1.3 ">Choose <span class="menucascade"><b><span class="uicontrol">VPC</span></b> &gt; <b><span class="uicontrol">My
VPC</span></b></span>, select a VPC, and choose <span class="menucascade"><b><span class="uicontrol">Network</span></b> &gt; <b><span class="uicontrol">Network</span></b></span>.</td>

</tr>

</tbody>

</table>
</div>
</div>

</div>


</body>
</html>