
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="zh-cn" xml:lang="zh-cn">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">
<meta name="copyright" content="(C) 版权 2005">
<meta name="DC.rights.owner" content="(C) 版权 2005">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="安装及配置VPN（Windows）">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="it_60_23_000022">
<meta name="DC.Language" content="zh-cn">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/commonltr.css">
<title>安装及配置VPN（Windows）</title>
<script type="text/javascript" language="JavaScript">
//<![CDATA[
function reDo() {
  if (innerWidth != origWidth || innerHeight != origHeight)
     location.reload();
}
if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
	origWidth = innerWidth;
	origHeight = innerHeight;
	onresize = reDo;
}
onerror = null; 
//]]>
</script>
<style type="text/css">
<!--
div.WebHelpPopupMenu { position:absolute;
left:0px;
top:0px;
z-index:4;
visibility:hidden; }
-->
</style>
<script type="text/javascript" language="javascript1.2" src="../../whmsg.js"></script>
<script type="text/javascript" language="javascript" src="../../whver.js"></script>
<script type="text/javascript" language="javascript1.2" src="../../whproxy.js"></script>
<script type="text/javascript" language="javascript1.2" src="../../whutils.js"></script>
<script type="text/javascript" language="javascript1.2" src="../../whlang.js"></script>
<script type="text/javascript" language="javascript1.2" src="../../whtopic.js"></script>

 <meta name="generator" content="Adobe RoboHelp 9">
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><script type="text/javascript" language="javascript1.2">//<![CDATA[
<!--
if (window.gbWhTopic)
{
	var strUrl = decodeURI(document.location.href);
	var bc = 0;
	var n = strUrl.toLowerCase().indexOf("bc-");
	if(n != -1)
	{
		document.location.href = encodeURI(strUrl.substring(0, n));
		bc = strUrl.substring(n+3);
	}

	if (window.addTocInfo)
	{
	addTocInfo("FAQ\n安装及配置VPN（Windows）");
addButton("show",BTN_TEXT,"显示","","","","",0,0,"","","");

	}
	if (window.writeBtnStyle)
		writeBtnStyle();

	if (window.writeIntopicBar)
		writeIntopicBar(1);

	
	document.write("<p style=\"text-align:right\"> ");
AddMasterBreadcrumbs("../../Help_User_System.htm", "", ">", "Home", "../father_node/it_60_99_start_cp.html");
document.write("<a href=\"../father_node/it_60_99_faq_cp_01.html\">FAQ<\/a> > 安装及配置VPN（Windows）<\/p>");


	if (window.setRelStartPage)
	{
	setRelStartPage("../../Help_User_System.htm");

		autoSync(1);
		sendSyncInfo();
		sendAveInfoOut();
	}
}
else
	if (window.gbIE4)
		document.location.reload();

//-->
//]]></script><a name="it_60_23_000022"></a><a name="it_60_23_000022"></a>



<h1 class="topictitle1">安装及配置VPN（Windows）</h1>
<ul><li><a href="#it_60_23_000022__1.2.1.1">操作场景</a></li><li><a href="#it_60_23_000022__1.2.2.1">前提条件</a></li><li><a href="#it_60_23_000022__1.2.3.1">操作步骤</a></li></ul>
<div>
<div class="section"><a name="it_60_23_000022__1.2.1.1"></a><a name="1.2.1.1"></a><h4 class="sectiontitle"><a href="#it_60_23_000022" class="sectiontitle2contents">操作场景</a></h4>


<div class="p"><div class="p">该任务指导软件调测工程师在网络隔离不能直接访问管理网络时，安装及配置VPN，通过VPN连接管理网络，以安装和使用<span>FusionManager</span>。通过VPN访问用户网络的组网图如<a href="#it_60_23_000022__fig_01">图1</a>所示。<div class="fignone" id="it_60_23_000022__fig_01"><a name="it_60_23_000022__fig_01"></a><a name="fig_01"></a><span class="figcap"><b>图1 </b>VPN组网图</span>

<br><span><img src="fig/fig_it_60_23_000022_13.png"></span>
</div>
</div>
<p>OpenVPN的安装及配置包括在服务端和客户端分别进行。OpenVPN的服务端，一般为用户提供的一台虚拟机或者物理机，在本例中称为“服务端S”。
OpenVPN的客户端，一般为管理员用于接入<span>FusionManager</span>的笔记本或者个人电脑，在本例中称为“客户端C”。</p>
<p>本文以提供OpenVPN软件安装在Windows类型操作系统为例，介绍如何安装及配置VPN软件。</p>
<p>不同版本的OpenVPN软件安装配置过程会有微小差异，本文以<span class="parmname">“2.2.1”</span>版本为例进行说明。</p>
</div>

</div>

<div class="section" id="it_60_23_000022__qianti"><a name="it_60_23_000022__qianti"></a><a name="qianti"></a><a name="it_60_23_000022__1.2.2.1"></a><a name="1.2.2.1"></a><h4 class="sectiontitle"><a href="#it_60_23_000022" class="sectiontitle2contents">前提条件</a></h4>


<div class="p">准备的VPN服务端已满足以下条件：<ul><li>VPN服务端物理部署：<p>已准备有一台双网卡的物理机，其中网卡1接入到管理网络中，网卡2接入到办公网络中。</p>
</li><li>VPN服务端虚拟化部署：<div class="p"><ul><li>已在空闲的虚拟化集群上创建一个有双网卡的虚拟机，虚拟机的网卡1接入到管理网络中，虚拟机的网卡2接入到办公网络中。此虚拟机建议优先创建在业务集群，在业务集群没有资源时，选择管理集群创建。</li><li>已在虚拟化环境中创建好办公网络。</li><li>虚拟机的规格满足需要安装的操作系统的推荐配置。</li></ul>
</div>
</li></ul>
</div>

</div>

<div class="section"><a name="it_60_23_000022__1.2.3.1"></a><a name="1.2.3.1"></a><h4 class="sectiontitle"><a href="#it_60_23_000022" class="sectiontitle2contents">操作步骤</a></h4>

<ul><div class="HandlingTitled"><p class="sectiontitle">在服务端S和客户端C上分别安装OpenVPN</p>
<p></p><div class="Steps-titled"><ol type="1" start="1"><li><span>登录OpenVPN官方网站：<a href="http://openvpn.net/" target="_blank">http://openvpn.net/</a>，下载<span class="parmname">“openvpn-2.2.1-install.exe”</span>软件。</span></li><li><span>双击<span class="parmname">“openvpn-2.1.1-install.exe”</span>，根据提示使用默认路径安装OpenVPN软件。</span>
</li><li><span>检查服务端S和客户端C上是否增加了一个本地连接？</span>
<p><ul><li>是，执行<a href="#it_60_23_000022__none">5</a>。</li><li>否，执行<a href="#it_60_23_000022__add">4</a>。</li></ul>
</p>
</li><li id="it_60_23_000022__add"><a name="it_60_23_000022__add"></a><a name="add"></a><span>打开服务端S和客户端C的<span class="filepath">“C:\Program Files\OpenVPN\bin”</span>目录，运行<span class="parmname">“addtap.bat”</span>。</span>
<p>添加一个虚拟网卡。</p>
</li></ol></div>
</div>
<div class="HandlingTitled"><p class="sectiontitle">在服务端S上初始化配置OpenVPN</p>
<div class="Steps-titled"><ol type="1" start="5"><li id="it_60_23_000022__none"><a name="it_60_23_000022__none"></a><a name="none"></a><span>打开服务端S的<span class="filepath">“C:\Program Files\OpenVPN\easy-rsa”</span>目录。</span></li><li><span>使用写字板打开<span class="parmname">“vars.bat.sample”</span>文件。</span>
</li><li><span>将光标移动到文件下方，修改以下字段。</span>
<p>set KEY_COUNTRY=<strong>CN</strong> <p>set KEY_PROVINCE=<strong>BJ</strong></p>
<p>set KEY_CITY=<strong>BeiJing</strong></p>
<p>set KEY_ORG=<strong>cdtsm</strong></p>
<p>set KEY_EMAIL=<strong>sunzhouyi@cdtsm.com</strong></p>
</p>
</li><li><span>保存文件并将文件名修改为<span class="parmname">“vars.bat”</span>。</span></li><li><span>在服务端S的操作系统中，在<span class="menucascade">“<span class="uicontrol">开始</span> &gt; <span class="uicontrol">搜索</span>”</span>中输入<span class="uicontrol">“cmd”</span>，单击<span class="uicontrol">“Enter”</span>。</span>
<p>弹出cmd命令提示符界面。</p>
</li><li><span>在cmd命令提示符界面，执行如下命令，进入<span class="parmname">“easy-rsa”</span>路径。</span>
<p><b><span class="cmdname">cd "\Program Files\OpenVPN\easy-rsa"</span></b></p>
</li><li><span>执行以下命令。</span>
<p><b><span class="cmdname">vars</span></b></p>
</li><li><span>执行以下命令。</span>
<p><b><span class="cmdname">clean-all</span></b></p>
<p>回显如下所示，表示执行成功。<pre class="screen">系统找不到指定的文件。
已复制         1 个文件。
已复制         1 个文件。
</pre>
</p>
</li><li><span>执行以下命令。</span>
<p><b><span class="cmdname">vars</span></b></p>
</li><li><span>执行以下命令，生成根CA。</span>
<p><b><span class="cmdname">build-ca</span></b></p>
</li><li><span>按照下图完成配置。</span>
<p><div class="fignone"><span class="figcap"><b>图2 </b>生成根CA配置</span>

<br><span><img src="fig/fig_it_60_23_000022_01.png"></span></div>
</p>
</li><li><span>执行以下命令。</span>
<p><b><span class="cmdname">vars</span></b></p>
</li><li><span>执行以下命令，生成<span class="parmname">“dh1024.pem”</span>文件。</span>
<p><b><span class="cmdname">build-dh</span></b></p>
<p>回显如下信息，表示生成文件成功。<pre class="screen">Loading 'screen' into random state - done
Generating DH parameters, 1024 bit long safe prime, generator 2
This is going to take a long time
...........+...............+......................+.....+..........
 ......................................................+*++*++
</pre>
</p>
</li></ol></div>
</div>
<div class="HandlingTitled"><p class="sectiontitle">在服务端S生成服务器端证书</p>
<div class="Steps-titled"><ol type="1" start="18"><li><span>执行以下命令。</span>
<p><b><span class="cmdname">vars</span></b></p>
</li><li><span>执行以下命令，生成服务器端证书。</span>
<p><b><span class="cmdname">build-key-server CdtsmServer</span></b></p>
</li><li><span>按照下图完成基本配置。</span>
<p><div class="fignone"><span class="figcap"><b>图3 </b>基本配置</span>

<br><span><img src="fig/fig_it_60_23_000022_04.png"></span></div>
</p>
</li><li><span>按照下图配置密码等其他信息。</span>
<p>配置完成后，服务端使用的证书生成完成。<div class="fignone"><span class="figcap"><b>图4 </b>其他配置信息</span>

<br><span><img src="fig/fig_it_60_23_000022_03.png"></span></div>
</p>
</li></ol></div>
</div>
<div class="HandlingTitled"><p class="sectiontitle">在服务端S生成客户端证书</p>
<div class="Steps-titled"><ol type="1" start="22"><li><span>执行以下命令。</span>
<p><b><span class="cmdname">vars</span></b></p>
</li><li><span>执行以下命令，生成客户端证书。</span>
<p><b><span class="cmdname">build-key CdtsmClient</span></b></p>
</li><li><span>按照下图完成基本配置。</span>
<p><div class="fignone"><span class="figcap"><b>图5 </b>基本配置</span>

<br><span><img src="fig/fig_it_60_23_000022_06.png"></span></div>
</p>
</li><li><span>按照下图配置密码等其他信息。</span>
<p>配置完成后，客户端使用的证书生成完成。<div class="fignone"><span class="figcap"><b>图6 </b>其他配置信息</span>

<br><span><img src="fig/fig_it_60_23_000022_07.png"></span></div>
</p>
</li></ol></div>
</div>
<div class="HandlingTitled"><p class="sectiontitle">在服务端S生成ta.key文件</p>
<div class="Steps-titled"><ol type="1" start="26"><li><span>执行以下命令，生成ta.key文件。</span>
<p><b><span class="cmdname">openvpn --genkey --secret keys/ta.Key</span></b></p>
<p>回显如下信息，表示生成成功。<pre class="screen">C:\Program Files\OpenVPN\easy-rsa&gt;</pre>
</p>
</li></ol></div>
</div>
<div class="HandlingTitled"><p class="sectiontitle">在服务端S配置OpenVPN服务端</p>
<div class="Steps-titled"><ol type="1" start="27"><li><span>打开服务端S的<span class="filepath">“C:\Program Files\OpenVPN\sample-config”</span>目录。</span></li><li><span>使用写字板打开<span class="parmname">“server.ovpn”</span>文件。</span></li><li><span>移动光标到<span class="parmname">“port”</span>设置处，设置使用的端口值。</span>
<p>使用的默认端口值为1194。</p>
<p># Which TCP/UDP port should OpenVPN listen on？<p># If you want
to run multiple OpenVPN instances</p>
<p># on the same machine, use
a different port</p>
<p># number for each one.  You will need to</p>
<p># open up this port on your firewall. </p>
<p>port <strong>1194</strong></p>
</p>
</li><li><span>设置使用的协议。</span>
<p>默认使用UDP协议，如果使用HTTP proxy，将使用的协议修改为TCP。</p>
<p># TCP or UDP server？ <p>;proto tcp</p>
<p><strong>proto udp</strong></p>
</p>
</li><li><span>设置使用的设备。</span>
<p>tap是二层设备，支持链路层协议,tun是ip层的点对点协议，可根据需要设置。</p>
<p><p>...</p>
<p># the firewall for the TUN/TAP interface.</p>
<p>;dev tap</p>
<p><strong>dev tun</strong></p>
</p>
</li></ol></div>
<div class="Steps-titled"><ol type="1" start="32"><li><span>将生成的根CA写入服务端的配置文件中。</span>
<p><p># Any X509 key management system can be used.</p>
<p># OpenVPN
can also use a PKCS #12 formatted key file</p>
<p># (see "pkcs12" directive
in man page). </p>
<p><strong>ca ca.crt</strong> </p>
<p><strong>cert server.crt</strong></p>
<p><strong>key CdtsmServer.key</strong>  # This file should be kept secret</p>
</p>
</li><li><span>将生成的dh1024.pem文件写入服务端的配置文件中。</span>
<p><p># Diffie hellman parameters.</p>
<p># Generate your own with: </p>
<p>#   openssl dhparam -out dh1024.pem 1024</p>
<p># Substitute 2048
for 1024 if you are using</p>
<p># 2048 bit keys.</p>
<p><strong>dh dh1024.pem</strong></p>
 </p>
</li><li><span>根据实际网络环境设置OpenVPN服务器内网IP和子网掩码。</span>
<p><p># Configure server mode and supply a VPN subnet</p>
<p># for
OpenVPN to draw client addresses from.</p>
<p># The server will take
192.168.0.1 for itself,</p>
<p># the rest will be made available to
clients.</p>
<p># Each client will be able to reach the server</p>
<p># on 192.168.0.1. Comment this line out if you are</p>
<p># ethernet
bridging. See the man page for more info. </p>
<p><strong>server <i><span class="varname">192.168.0.0 255.255.255.0</span></i></strong></p>
</p>
</li><li><span>根据实际网络环境添加路由。</span>
<p>把添加的路由发送给客户端，客户连接成功后自动加入路由表。</p>
<p># EXAMPLE: Suppose the client <p># having the certificate common
name "Thelonious"</p>
<p># also has a small subnet behind his connecting</p>
<p># machine, such as 192.168.40.128/255.255.255.248.</p>
<p># First,
uncomment out these lines:</p>
<p>client-config-dir ccd</p>
<p>push
"route <strong><i><span class="varname">192.168.3.0 255.255.255.0</span></i></strong>"</p>
<p>push "route <strong><i><span class="varname">192.168.22.0 255.255.255.0</span></i></strong>"</p>
</p>
</li><li><span>根据实际网络环境向客户端发送DNS。</span>
<p><p># Certain Windows-specific network settings</p>
<p># can be
pushed to clients, such as DNS</p>
<p># or WINS server addresses. 
CAVEAT:</p>
<p># http://openvpn.net/faq.html#dhcpcaveats</p>
<p># The
addresses below refer to the public</p>
<p># DNS servers provided by
opendns.com.</p>
<p>push "dhcp-option <strong><i><span class="varname">DNS 192.168.22.243</span></i></strong>"</p>
<p>push "dhcp-option <strong><i><span class="varname">WINS 192.168.0.20</span></i></strong>"</p>
 </p>
</li><li><span>设置转发方式。</span>
<p>可以让VPN客户端之间相互访问直接通过OpenVPN程序转发，不用发送到tun或者tap设备后重新转发，优化Client
to Client的访问效率。</p>
<p><p># Uncomment this directive to allow different</p>
<p># clients
to be able to "see" each other.</p>
<p># By default, clients will only
see the server.</p>
<p># To force clients to only see the server, you</p>
<p># will also need to appropriately firewall the</p>
<p># server's
TUN/TAP interface.</p>
<p><strong>client-to-client</strong></p>
</p>
</li><li><span>设置可以多人连接VPN。</span>
<p>如果Client使用的CA的Common Name有重复，或者说客户都使用相同的CA和keys连接VPN，一定要打开这个选项，否则只允许一个人连接VPN。</p>
<p><p># IF YOU HAVE NOT GENERATED INDIVIDUAL</p>
<p># CERTIFICATE/KEY
PAIRS FOR EACH CLIENT,</p>
<p># EACH HAVING ITS OWN UNIQUE "COMMON
NAME",</p>
<p># UNCOMMENT THIS LINE OUT.</p>
<p><strong>duplicate-cn</strong></p>
</p>
</li><li><span>设置VPN的连接时间。</span>
<p>下面表示每10秒通过VPN的Control通道ping对方，如果连续120秒无法ping通，为连接丢失，并重新启动VPN，重新连接（mode
server模式下的openvpn不会重新连接）。时间间隔可以根据需要设置。</p>
<p><p># The keepalive directive causes ping-like</p>
<p># messages
to be sent back and forth over</p>
<p># the link so that each side
knows when</p>
<p># the other side has gone down.</p>
<p># Ping every
10 seconds, assume that remote</p>
<p># peer is down if no ping received
during</p>
<p># a 120 second time period.</p>
<p><strong>keepalive <i><span class="varname">10</span></i> <i><span class="varname">120</span></i></strong></p>
</p>
</li><li><span>将生成的防止攻击文件写入服务器端的文件中。</span>
<p>HMAC防火墙，防止DOS攻击，对于所有的控制信息，都使用HMAC signature，没有HMAC signature的控制信息不予处理。</p>
<p><p># The server and each client must have</p>
<p># a copy of
this key.</p>
<p># The second parameter should be '0'</p>
<p># on the
server and '1' on the clients.</p>
<p><strong>tls-auth ta.key 0</strong></p>
</p>
</li><li><span>定义最大连接数，可根据需要设置。</span>
<p><p># The maximum number of concurrently connected</p>
<p># clients
we want to allow.</p>
<p><strong>max-clients <em>20</em></strong></p>
</p>
</li><li><span>定义运行OpenVPN的用户。</span>
<p><p># You can uncomment this out on</p>
<p># non-Windows systems.</p>
<p><strong>user nobody</strong></p>
<p><strong>group nobody</strong></p>
</p>
</li><li><span>设置超时后的处理。</span>
<p>通过keepalive检测超时后，重新启动VPN，不重新读取keys，保留第一次使用的keys。<p>通过keepalive检测超时后，重新启动VPN，一直保持tun或者tap设备是linkup的，否则网络连接会先linkdown然后linkup。</p>
</p>
<p><p># The persist options will try to avoid</p>
<p># accessing
certain resources on restart</p>
<p># that may no longer be accessible
because</p>
<p># of the privilege downgrade.</p>
<p><strong>persist-key</strong></p>
<p><strong>persist-tun</strong></p>
</p>
</li><li><span>把配置好的<span class="parmname">“server.ovpn”</span>文件复制到<span class="filepath">“C:\Program Files\OpenVPN\config”</span>目录下。</span></li><li><span>把<span class="filepath">“C:\Program Files\OpenVPN\easy-rsa\keys”</span>目录下的<span class="parmname">“ca.crt”</span>、<span class="parmname">“ca.key”</span>、<span class="parmname">“CdtsmServer.crt”</span>、<span class="parmname">“CdtsmServer.csr”</span>、<span class="parmname">“CdtsmServer.key”</span>、<span class="parmname">“dh1024.pem”</span>、<span class="parmname">“ta.key”</span>文件复制到<span class="filepath">“C:\Program Files\OpenVPN\config”</span>目录下。</span></li><li><span>双击桌面上的<span class="parmname">“OpenVPN GUI”</span>的图标，启动后鼠标右键单击服务器桌面右下角的<span><img src="fig/fig_it_60_23_000022_08.png"></span>图标，选择<span class="parmname">“Connect”</span>。</span>
<p>当右下角的<span><img src="fig/fig_it_60_23_000022_09.png"></span>图标变为绿色时表示连接成功。</p>
</li></ol></div>
</div>
<div class="HandlingTitled"><p class="sectiontitle">在客户端C配置OpenVPN客户端</p>
<div class="Steps-titled"><ol type="1" start="47"><li><span>打开OpenVPN客户端所在服务器的<span class="filepath">“C:\Program Files\OpenVPN\sample-config”</span>目录。</span></li><li><span>使用写字板打开<span class="parmname">“client.ovpn”</span>文件。</span></li><li><span>配置接口类型，严格和服务端保持一致。</span>
<p><p>...</p>
<p># the firewall for the TUN/TAP interface.</p>
<p>;dev tap</p>
<p><strong>dev tun</strong></p>
</p>
</li><li><span>配置使用的协议，严格和服务端保持一致。</span>
<p><p># Are we connecting to a TCP or</p>
<p># UDP server？ Use the
same setting as</p>
<p># on the server.</p>
<p>;proto tcp</p>
<p><strong>proto
udp</strong></p>
</p>
</li><li><span>设置OpenVPN的外网IP。</span>
<p><p># The hostname/IP and port of the server.</p>
<p># You can
have multiple remote entries</p>
<p># to load balance between the servers.</p>
<p><strong>remote <em>my-server-1</em> 1194</strong></p>
<p>;remote my-server-2
1194</p>
</p>
</li><li><span>设置Server的连接为随机连接。</span>
<p><p># Choose a random host from the remote</p>
<p># list for load-balancing.
 Otherwise</p>
<p># try hosts in the order specified.</p>
<p><strong>remote-random</strong></p>
</p>
</li><li><span>配置始终重新解析Server的IP地址。</span>
<p>保证Server IP地址是动态的，使用DDNS动态更新DNS后，Client在自动重新连接时重新解析Server的IP地址，这样无需人为重新启动，即可重新接入VPN。</p>
<p><p># Keep trying indefinitely to resolve the</p>
<p># host name
of the OpenVPN server.  Very useful</p>
<p># on machines which are
not permanently connected</p>
<p># to the internet such as laptops.</p>
<p><strong>resolv-retry infinite</strong></p>
</p>
</li><li><span>设置不绑定端口。</span>
<p>在本机不绑定任何端口监视incoming数据，Client无需此操作，除非一对一的VPN有必要。</p>
<p><p># Most clients don't need to bind to</p>
<p># a specific local
port number.</p>
<p><strong>nobind</strong></p>
</p>
</li><li><span>定义运行OpenVPN的用户。</span>
<p><p># Downgrade privileges after initialization (non-Windows
only)</p>
<p><strong>user nobody</strong></p>
<p><strong>group nobody</strong></p>
</p>
</li><li><span>设置超时后的处理。</span>
<p>和Server上配置的功能一样 如果使用了chroot或者su功能，最好打开下面2个选项，防止重新启动后找不到keys文件，或者nobody用户没有权限启动tun设备。</p>
<p><p># Try to preserve some state across restarts.</p>
<p><strong>persist-key</strong></p>
<p><strong>persist-tun</strong></p>
</p>
</li><li><span>将生成的证书写入客户端的配置文件中。</span>
<p><p># SSL/TLS parms.</p>
<p># See the server config file for more</p>
<p># description.  It's best to use</p>
<p># a separate .crt/.key
file pair</p>
<p># for each client.  A single ca</p>
<p># file can be
used for all clients.</p>
<p><strong>ca ca.crt</strong></p>
<p><strong>cert CdtsmClient.crt</strong></p>
<p><strong>key CdtsmClient.key</strong></p>
</p>
</li><li><span>把配置好的<span class="parmname">“client.ovpn”</span>文件复制到<span class="filepath">“C:\Program Files\OpenVPN\config”</span>目录下。</span></li><li><span>把<span class="filepath">“C:\Program Files\OpenVPN\easy-rsa\keys”</span>目录下的<span class="parmname">“ca.crt”</span>、<span class="parmname">“ca.key”</span>、<span class="parmname">“ta.key”</span>、<span class="parmname">“CdtsmClient.crt”</span>、<span class="parmname">“CdtsmClient.csr”</span>、<span class="parmname">“CdtsmClient.key”</span>、<span class="parmname">“ta.key”</span>文件复制到<span class="filepath">“C:\Program Files\OpenVPN\config”</span>目录下。</span></li><li><span>双击桌面上的<span class="parmname">“OpenVPN GUI”</span>的图标，启动后鼠标右键单击服务器桌面右下角的<span><img src="fig/fig_it_60_23_000022_08.png"></span>图标，选择<span class="parmname">“Connect”</span>。</span>
<p>当右下角的<span><img src="fig/fig_it_60_23_000022_09.png"></span>图标变为绿色时表示连接成功。</p>
</li></ol></div>
</div>
</ul>

</div>

</div>


<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">华为专有和保密信息</div><div class="hwcopyright">版权所有 &copy; 华为技术有限公司</div><script type="text/javascript" language="javascript1.2">//<![CDATA[
<!--
if (window.writeIntopicBar)
	writeIntopicBar(0);


highlightSearch();
//-->
//]]></script>
</body>
</html>