
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Expanding Space for Storing Scripts and Software Packages">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="it_60_51_600007">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../public_sys-resources/ExpandCollapse.js"></script>
<title>Expanding Space for Storing Scripts and Software Packages</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="it_60_51_600007"></a><a name="it_60_51_600007"></a>


<h1 class="topictitle1">Expanding Space for Storing <span>Scripts</span> and Software Packages</h1>

<div>
<div class="section"><h4 class="sectiontitle">Scenarios</h4>


<div class="p"><p>Change the directory containing software packages of the <span>FusionManager</span> node to obtain
more space for storing the software packages, and scripts in the following scenarios:</p>
<ul><li>The <span class="wintitle"><b>9215 System Disk Usage Exceeding the Threshold</b></span> alarm is generated.</li><li>A message indicating that space is insufficient is displayed when
you upload a software package,
or script.</li></ul>
<div class="note"><img src="../theme/default/images/icon-note.gif"><span class="notetitle"> NOTE: </span><div class="notebody"><p>If the VM on which the <span>FusionManager</span> node is deployed
is created in a VMware hypervisor, the VM restarts and an active/standby
switchover occurs when you perform this operation. Therefore, you
are advised to perform this operation during off-peak hours. </p>
</div></div>
</div>

</div>

<div class="section"><h4 class="sectiontitle">Prerequisites</h4>


<div class="p"><p>You have obtained the management IP addresses of the active
and standby <span>FusionManager</span> nodes and the <span class="parmname"><b>galaxmanager</b></span> user password.</p>
</div>

</div>

<div class="section"><h4 class="sectiontitle">Procedure</h4>

<ol><li><span>Use PuTTY to log in to the active <span>FusionManager</span> node as user <span class="parmvalue"><b>galaxmanager</b></span> and run the following command to query the
size of the directory containing the software packages:</span>
<p><b><span class="cmdname">df -h /opt/goku/data/ame</span></b><pre class="screen">Filesystem            Size  Used Avail Use% Mounted on
/dev/sda15            153G  188M  145G   1% /opt/goku/data/ame</pre>
<p>In the command output, <span class="parmname"><b>Size</b></span> indicates the
size of the directory.</p>
</p>
</li><li><span>Add disks to the VMs on which the active and standby <span>FusionManager</span> nodes are deployed,
respectively.</span>
<p><ul><li>If the VM on which the <span>FusionManager</span> node is deployed
is created in the FusionCompute hypervisor, see the <span class="filepath"><b>FusionCompute
Product Documentation</b></span> for details about how to add a disk
to the VM.</li><li>If the VM on which the <span>FusionManager</span> node is deployed
is created in the VMware hypervisor, see the <span class="filepath"><b>VMware Product
Documentation</b></span> for details about how to add a disk to the
VM.</li></ul>
<div class="note"><img src="../theme/default/images/icon-note.gif"><span class="notetitle"> NOTE: </span><div class="notebody"><p>Ensure that the disks of the same size are
added to the VMs on which the active and standby <span>FusionManager</span> nodes are deployed.
You are advised to add disks from a shared storage device to the VMs. </p>
</div></div>
</p>
</li><li><span>Use PuTTY to log in to the standby <span>FusionManager</span> node as user <span class="parmvalue"><b>galaxmanager</b></span>.</span></li><li id="it_60_51_600007__stp_001"><a name="it_60_51_600007__stp_001"></a><a name="stp_001"></a><span>Run the following command to view information
about the newly added disk:</span>
<p><b><span class="cmdname">modConfig ame fdisk</span></b><p>The following information
is displayed if <span>FusionManager</span> is deployed in the FusionCompute hypervisor:</p>
<pre class="screen"><strong>Disk /dev/xvde:</strong> 10.7 GB, 10737418240 bytes
255 heads, 63 sectors/track, 1305 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
...
<strong>Please input the disk which expand to directory of script and software :</strong></pre>
<p>The following information is displayed if <span>FusionManager</span> is deployed
in the VMware hypervisor:</p>
<pre class="screen"><strong>Disk /dev/sdb:</strong> 10.7 GB, 10737418240 bytes
255 heads, 63 sectors/track, 1305 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
...
<strong>Please input the disk which expand to directory of script and software :</strong></pre>
</p>
</li><li><span>Select the added disk.</span>
<p><p>For example, select <span class="filepath"><b>/dev/xvde</b></span> in the <span>FusionCompute</span> hypervisor
and <b><span class="cmdname">/dev/sdb</span></b> in the VMware hypervisor.</p>
<p>The
following information is displayed:</p>
<pre class="screen">...
Warning: invalid flag 0x0000 of partition table 4 will be corrected by w(rite)

<strong>Command (m for help):</strong>
</pre>
</p>
</li><li><span>Enter <span class="parmvalue"><b>n</b></span> and press <span class="uicontrol"><b>Enter</b></span> to create partitions. </span>
<p><p>The following information is displayed:</p>
<pre class="screen">...
Command action
   e   extended
   p   primary partition (1-4)</pre>
</p>
</li><li><span>Enter <span class="parmvalue"><b>p</b></span> and press <span class="uicontrol"><b>Enter</b></span>.</span>
<p><p>The following information is displayed:</p>
<pre class="screen">Partition number (1-4):</pre>
</p>
</li><li><span>Enter the number of the primary partition and press <span class="uicontrol"><b>Enter</b></span>.</span>
<p><p>The following operations uses <span class="parmvalue"><b>3</b></span> as
the primary partition number as an example to describe the creation
process. </p>
<p>The following information is displayed:</p>
<pre class="screen">...
First cylinder (1-1305, default 1):</pre>
</p>
</li><li><span>Press <span class="uicontrol"><b>Enter</b></span>.</span>
<p><p>The following operations use the default start cylinder number
as an example.</p>
<p>The following information is displayed:</p>
<pre class="screen">...
Using default value 1
Last cylinder or +size or +sizeM or +sizeK (1-1305, default 1305):</pre>
</p>
</li><li><span>Press <span class="uicontrol"><b>Enter</b></span>.</span>
<p><p>The following operations use the default end cylinder number
as an example. </p>
<p>The following information is displayed:</p>
<pre class="screen">...
Using default value 1305

Command (m for help):</pre>
</p>
</li><li><span>Enter <span class="parmvalue"><b>p</b></span> and press <span class="uicontrol"><b>Enter</b></span> to view created partitions. </span>
<p>The following information is displayed:<pre class="screen">...
Disk /dev/xvde: 10.7 GB, 10737418240 bytes
255 heads, 63 sectors/track, 1305 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes

Device Boot      Start         End      Blocks   Id   System
/dev/xvde3           1        1305    10482381   83   Linux</pre>
<p>The <span class="filepath"><b>/dev/xvde3</b></span> partition is used as an example
in the following operations. </p>
</p>
</li><li><span>Enter <span class="parmvalue"><b>w</b></span> and press <span class="uicontrol"><b>Enter</b></span> to write the partition result to the partition table. </span>
<p><p>The following information is displayed:</p>
<pre class="screen">...
<strong>The partition table has been altered!</strong>

Calling ioctl() to re-read partition table.
Syncing disks.
</pre>
<p>The partition is created. </p>
</p>
</li><li id="it_60_51_600007__stp_002"><a name="it_60_51_600007__stp_002"></a><a name="stp_002"></a><span>Run the following command to allocate the
file system of the created partitions to software packages and scripts.</span>
<p><p><b><span class="cmdname">modConfig ame expand /dev/xvde3</span></b></p>
<p>The following information is displayed:</p>
<pre class="screen">...
Writing inode tables: done 
Creating journal (32768 blocks): done 
Writing superblocks and filesystem accounting information: done 
 
This filesystem will be automatically checked every 39 mounts or 
180 days, whichever comes first.  Use tune2fs -c or -i to override. 

expand software directory success
</pre>
</p>
</li><li><span>Log in to the active <span>FusionManager</span> node to change
the software package directory. For details, see <a href="#it_60_51_600007__stp_001">4</a> to <a href="#it_60_51_600007__stp_002">13</a>.</span></li></ol>

</div>

</div>


</body>
</html>