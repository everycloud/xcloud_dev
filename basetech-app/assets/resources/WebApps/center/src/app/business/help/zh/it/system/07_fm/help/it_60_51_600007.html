
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="zh-cn" xml:lang="zh-cn">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">
<meta name="copyright" content="(C) 版权 2005">
<meta name="DC.rights.owner" content="(C) 版权 2005">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="如何扩大脚本和软件包的存储空间">
<meta name="DC.Relation" scheme="URI" content="../../07_fm/father_node/it_60_99_faq.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="it_60_51_600007">
<meta name="DC.Language" content="zh-cn">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/commonltr.css">
<title>如何扩大脚本和软件包的存储空间</title>
<script type="text/javascript" language="JavaScript">
//<![CDATA[
function reDo() {
  if (innerWidth != origWidth || innerHeight != origHeight)
     location.reload();
}
if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
	origWidth = innerWidth;
	origHeight = innerHeight;
	onresize = reDo;
}
onerror = null; 
//]]>
</script>
<style type="text/css">
<!--
div.WebHelpPopupMenu { position:absolute;
left:0px;
top:0px;
z-index:4;
visibility:hidden; }
-->
</style>
<script type="text/javascript" language="javascript1.2" src="../../whmsg.js"></script>
<script type="text/javascript" language="javascript" src="../../whver.js"></script>
<script type="text/javascript" language="javascript1.2" src="../../whproxy.js"></script>
<script type="text/javascript" language="javascript1.2" src="../../whutils.js"></script>
<script type="text/javascript" language="javascript1.2" src="../../whlang.js"></script>
<script type="text/javascript" language="javascript1.2" src="../../whtopic.js"></script>

 <meta name="generator" content="Adobe RoboHelp 9">
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><script type="text/javascript" language="javascript1.2">//<![CDATA[
<!--
if (window.gbWhTopic)
{
	var strUrl = decodeURI(document.location.href);
	var bc = 0;
	var n = strUrl.toLowerCase().indexOf("bc-");
	if(n != -1)
	{
		document.location.href = encodeURI(strUrl.substring(0, n));
		bc = strUrl.substring(n+3);
	}

	if (window.addTocInfo)
	{
	addTocInfo("FAQ\n如何扩大脚本和软件包的存储空间");
addButton("show",BTN_TEXT,"显示","","","","",0,0,"","","");

	}
	if (window.writeBtnStyle)
		writeBtnStyle();

	if (window.writeIntopicBar)
		writeIntopicBar(1);

	
	document.write("<p style=\"text-align:right\"> ");
AddMasterBreadcrumbs("../../Help_Admin_System.htm", "", ">", "Home", "../father_node/it_60_99_start.html");
document.write("<a href=\"../father_node/it_60_99_faq.html\">FAQ<\/a> > 如何扩大脚本和软件包的存储空间<\/p>");


	if (window.setRelStartPage)
	{
	setRelStartPage("../../Help_Admin_System.htm");

		autoSync(1);
		sendSyncInfo();
		sendAveInfoOut();
	}
}
else
	if (window.gbIE4)
		document.location.reload();

//-->
//]]></script><a name="it_60_51_600007"></a><a name="it_60_51_600007"></a>


<h1 class="topictitle1">如何扩大<span>脚本</span>和软件包的存储空间</h1>
<ul><li><a href="#it_60_51_600007__1.2.1.1">操作场景</a></li><li><a href="#it_60_51_600007__1.2.2.1">前提条件</a></li><li><a href="#it_60_51_600007__1.2.3.1">操作步骤</a></li></ul>
<div>
<div class="section"><a name="it_60_51_600007__1.2.1.1"></a><a name="1.2.1.1"></a><h4 class="sectiontitle"><a href="#it_60_51_600007" class="sectiontitle2contents">操作场景</a></h4>


<div class="p"><p>在使用<span>FusionManager</span>的过程中，如果遇到如下几种情况，可能需要管理员更换<span>FusionManager</span>节点的软件包分区，以获得更大的软件包、脚本存放空间。</p>
<ul><li>产生<span class="wintitle">“9215 系统磁盘使用率过大”</span>的告警。</li><li>上传软件包、脚本时提示空间不足。</li></ul>
<div class="note"><img src="../../public_sys-resources/icon-note.gif"><span class="notetitle"> 说明： </span><div class="notebody"><p>如果<span>FusionManager</span>节点虚拟机由VMware创建，在操作过程中会将虚拟机重启并发生主备节点倒换，建议在业务量较少的时间段执行该任务。</p>
</div></div>
</div>

</div>

<div class="section"><a name="it_60_51_600007__1.2.2.1"></a><a name="1.2.2.1"></a><h4 class="sectiontitle"><a href="#it_60_51_600007" class="sectiontitle2contents">前提条件</a></h4>


<div class="p"><p>已获取<span>FusionManager</span>主、备节点的管理IP地址以及galaxmanager用户的密码。</p>
</div>

</div>

<div class="section"><a name="it_60_51_600007__1.2.3.1"></a><a name="1.2.3.1"></a><h4 class="sectiontitle"><a href="#it_60_51_600007" class="sectiontitle2contents">操作步骤</a></h4>

<ol><li><span>使用PuTTY，以<span class="parmvalue">“galaxmanager”</span>用户登录<span>FusionManager</span>主节点，查看当前应用软件存放分区的大小。</span>
<p><b><span class="cmdname">df -h /opt/goku/data/ame</span></b><pre class="screen">Filesystem            Size  Used Avail Use% Mounted on
/dev/sda15            153G  188M  145G   1% /opt/goku/data/ame</pre>
<p>其中<span class="parmname">“Size”</span>表示分区的大小。</p>
</p>
</li><li><span>分别为<span>FusionManager</span>主备节点虚拟机添加磁盘。</span>
<p><ul><li>如果<span>FusionManager</span>节点所在虚拟机是在FusionCompute虚拟化环境中创建，请参考FusionCompute产品文档为虚拟机添加磁盘。</li><li>如果<span>FusionManager</span>节点所在虚拟机是在VMware虚拟化环境中创建，请参考VMware产品文档为虚拟机添加磁盘。</li></ul>
<div class="note"><img src="../../public_sys-resources/icon-note.gif"><span class="notetitle"> 说明： </span><div class="notebody"><p>确保<span>FusionManager</span>主备节点所在虚拟机添加的磁盘大小相同，并建议使用共享存储的磁盘。</p>
</div></div>
</p>
</li><li><span>使用PuTTY，以<span class="parmvalue">“galaxmanager”</span>用户登录<span>FusionManager</span>备节点。</span></li><li id="it_60_51_600007__stp_001"><a name="it_60_51_600007__stp_001"></a><a name="stp_001"></a><span>执行以下命令，查看新增的磁盘信息。</span>
<p><b><span class="cmdname">modConfig ame fdisk</span></b><p><span>FusionManager</span>部署在FusionCompute虚拟化环境时，回显信息如下：</p>
<pre class="screen"><strong>Disk /dev/xvde:</strong> 10.7 GB, 10737418240 bytes
255 heads, 63 sectors/track, 1305 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
...
<strong>Please input the disk which expand to directory of script and software :</strong></pre>
<p><span>FusionManager</span>部署在VMware虚拟化环境时，回显信息如下：</p>
<pre class="screen"><strong>Disk /dev/sdb:</strong> 10.7 GB, 10737418240 bytes
255 heads, 63 sectors/track, 1305 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
...
<strong>Please input the disk which expand to directory of script and software :</strong></pre>
</p>
</li><li><span>选择添加的磁盘。</span>
<p><p>以<span>FusionCompute</span>虚拟化环境，<span class="filepath">“/dev/xvde”</span>为例，输入</p>
<div class="p"><b><span class="cmdname">/dev/xvde</span></b><div class="note"><img src="../../public_sys-resources/icon-note.gif"><span class="notetitle"> 说明： </span><div class="notebody"><p>若为VMware虚拟化环境时，例如<b><span class="cmdname">/dev/sdb</span></b>。</p>
</div></div>
</div>
<p>回显信息如下：</p>
<pre class="screen">...
Warning: invalid flag 0x0000 of partition table 4 will be corrected by w(rite)

<strong>Command (m for help):</strong>
</pre>
</p>
</li><li><span>输入<span class="parmvalue">“n”</span>，按<span class="uicontrol">“Enter”</span>，开始新创建分区。</span>
<p><p>回显信息如下：</p>
<pre class="screen">...
Command action
   e   extended
   p   primary partition (1-4)</pre>
</p>
</li><li><span>输入<span class="parmvalue">“p”</span>，按<span class="uicontrol">“Enter”</span>。</span>
<p><p>回显信息如下：</p>
<pre class="screen">Partition number (1-4):</pre>
</p>
</li><li><span>输入主分区编号，按<span class="uicontrol">“Enter”</span>。</span>
<p><p>以主分区编号为<span class="parmvalue">“3”</span>说明分区创建过程。</p>
<p>回显信息如下：</p>
<pre class="screen">...
First cylinder (1-1305, default 1):</pre>
</p>
</li><li><span>按<span class="uicontrol">“Enter”</span>。</span>
<p><p>以使用默认的初始磁柱编号为例。</p>
<p>回显信息如下：</p>
<pre class="screen">...
Using default value 1
<strong></strong>Last cylinder or +size or +sizeM or +sizeK (1-1305, default 1305):</pre>
</p>
</li><li><span>按<span class="uicontrol">“Enter”</span>。</span>
<p><p>以使用默认的截止磁柱编号为例。</p>
<p>回显信息如下：</p>
<pre class="screen">...
Using default value 1305

Command (m for help):</pre>
</p>
</li><li><span>输入<span class="parmvalue">“p”</span>，按<span class="uicontrol">“Enter”</span>，查看新建的分区。</span>
<p>回显信息如下：<pre class="screen">...
Disk /dev/xvde: 10.7 GB, 10737418240 bytes
255 heads, 63 sectors/track, 1305 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes

Device Boot      Start         End      Blocks   Id   System
/dev/xvde3           1        1305    10482381   83   Linux</pre>
<p>在下面的操作中，均以分区<span class="filepath">“/dev/xvde3”</span>为例进行说明。</p>
</p>
</li><li><span>输入<span class="parmvalue">“w”</span>，按<span class="uicontrol">“Enter”</span>，将分区结果写入分区表中。</span>
<p><p>回显信息如下：</p>
<pre class="screen">...
<strong>The partition table has been altered!</strong>

Calling ioctl() to re-read partition table.
Syncing disks.
</pre>
<p>分区创建完毕。</p>
</p>
</li><li id="it_60_51_600007__stp_002"><a name="it_60_51_600007__stp_002"></a><a name="stp_002"></a><span>执行以下命令，将新创建分区文件系统分配给软件包和脚本存储使用。</span>
<p><p><b><span class="cmdname">modConfig ame expand /dev/xvde3</span></b></p>
<p>回显信息如下：</p>
<pre class="screen">...
Writing inode tables: done 
Creating journal (32768 blocks): done 
Writing superblocks and filesystem accounting information: done 
 
This filesystem will be automatically checked every 39 mounts or 
180 days, whichever comes first.  Use tune2fs -c or -i to override. 

expand software directory success
</pre>
</p>
</li><li><span>登录<span>FusionManager</span>主节点更换软件包分区，具体操作方法请参考<a href="#it_60_51_600007__stp_001">4</a>～<a href="#it_60_51_600007__stp_002">13</a>。</span></li></ol>

</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="../father_node/it_60_99_faq.html" title="">FAQ</a></div>
</div>
</div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">华为专有和保密信息</div><div class="hwcopyright">版权所有 &copy; 华为技术有限公司</div><script type="text/javascript" language="javascript1.2">//<![CDATA[
<!--
if (window.writeIntopicBar)
	writeIntopicBar(0);


highlightSearch();
//-->
//]]></script>
</body>
</html>