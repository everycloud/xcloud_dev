<div class="template-vmSpec-detail container-fluid" ng-controller="template.vmSpec.detail.ctrl">
    <div class="innerbox-padding">
        <div class="row-fluid">
            <div class="span5">
                <tiny-formfield>
                    <tiny-item label="description.label" require="description.require">
                        <div class="over-flow-style" style="width: 350px;">
                            <span ng-bind="description.value" title="{{ description.value }}"></span>
                        </div>
                    </tiny-item>
                    <tiny-item label="diskTable.label" require="diskTable.require">
                        <tiny-table id="diskTable.id" caption="diskTable.caption" data="diskTable.data"
                                    render-row="diskTable.renderRow"
                                    columns="diskTable.columns"
                                    enable-pagination="diskTable.enablePagination"
                                    columns-draggable="diskTable.columnsDraggable"></tiny-table>
                    </tiny-item>
                </tiny-formfield>
            </div>
            <div class="span2">
            </div>
            <div class="span5">
                <div class="row-fluid">
                    <div class="span12">
                        <tiny-formfield>
                            <tiny-item label="cpu.label" require="cpu.require">
                                <span ng-bind="cpu.value"></span>
                            </tiny-item>
                            <tiny-item label="memory.label" require="memory.require">
                                <span ng-bind="memory.value"></span>
                            </tiny-item>
                            <tiny-item label="cpuConfig.label" require="cpuConfig.require">
                                <span ng-bind="i18n.common_term_limitRtae_label"></span>:<span ng-bind="cpuConfig.limit"></span>%
                                <span ng-bind="i18n.perform_term_reservedRtae_label"></span>:<span ng-bind="cpuConfig.reserve"></span>%
                                <span ng-bind="i18n.common_term_qouta_label"></span>:<span ng-bind="cpuConfig.share"></span>
                            </tiny-item>
                            <tiny-item label="memoryConfig.label" require="memoryConfig.require">
                                <span ng-bind="i18n.perform_term_reservedRtae_label"></span>:<span ng-bind="memoryConfig.reserve"></span>%
                                <span ng-bind="i18n.common_term_qouta_label"></span>:<span ng-bind="memoryConfig.share"></span>
                            </tiny-item>
                        </tiny-formfield>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    require(['jquery',
        'app/business/resources/controllers/templateSpec/spec/vmSpec/vmSpecDetailCtrl',
        'app/business/resources/controllers/constants'],
            function ($, vmSpecDetailCtrl, constants) {

                // 1.获取当前Dom
                var curView = undefined;
                $(".template-vmSpec-detail").each(function () {
                    if ($(this).attr("id") === undefined) {
                        curView = $(this);
                    }
                });

                curView.attr("id", new Date().getMilliseconds());

                // 2.编译
                var scope = curView.scope();

                var modules = ["wcc",vmSpecDetailCtrl.name];
                modules.unshift(["$provide", function($provide) {
                    $provide.value("$rootElement", curView);
                }]);
                modules.unshift("ng");
                var $injector = angular.injector(modules);
                $injector.invoke(["$compile", function ($compile) {
                    $compile(curView)(scope);
                    scope.$digest();
                }]);

                // 3.初始化scope
                var curScope = curView.scope();
                curScope.queryDetail(scope.currentItem);
            });
</script>