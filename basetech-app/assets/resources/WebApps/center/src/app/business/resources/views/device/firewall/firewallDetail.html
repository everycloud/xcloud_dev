<div id="firewallDetail">
    <div class="row-fluid innerbox-padding">
        <div class="span6">
            <div class="padding-bottom8">
                <span class="color2">{{i18n.common_term_type_label}}:</span>
                <span ng-bind="deviceType"></span>
            </div>
            <div class="padding-bottom8">
                <span class="color2">{{i18n.device_term_firewallRID_label}}:</span>
                <span ng-bind="deviceRid"></span>
            </div>
            <div class="padding-bottom8">
                <span class="color2">{{i18n.common_term_desc_label}}:</span>
                <span ng-bind="description"></span>
            </div>
        </div>
        <div class="span6">
            <div class="padding-bottom8">
                <span class="color2">{{i18n.device_term_subrack_label}}:</span>
                <span ng-bind="rack"></span>
            </div>
            <div class="padding-bottom8">
                <span class="color2">{{i18n.device_term_cabinet_label}}:</span>
                <span ng-bind="subrack"></span>
            </div>
        </div>
    </div>
</div>
<script type="application/javascript">
    require(["app/business/resources/controllers/device/firewall/firewallDetailCtrl"],
            function (firewallDetailCtrl) {
                var type = $("#firewallDetail").parent().parent().parent().prev().attr("type");
                var rid = $("#firewallDetail").parent().parent().parent().prev().attr("rid");
                var cabinet = $("#firewallDetail").parent().parent().parent().prev().attr("cabinet");
                var subrack = $("#firewallDetail").parent().parent().parent().prev().attr("subrack");
                var description = $("#firewallDetail").parent().parent().parent().prev().attr("description");
                //替换ID，使ID唯一
                var index = $("#firewallDetail").parent().parent().parent().prev().attr("index");
                var id = "firewallDetail" + index;
                $("#firewallDetail").attr("id", id);
                $("#" + id).attr("ng-controller", "firewallDetailCtrl");

                //编译
                var dep = ['ng', 'wcc', firewallDetailCtrl.name];
                dep.unshift(["$provide", function ($provide) {
                    $provide.value("$rootElement", $("#" + id));
                }]);
                var $injector = angular.injector(dep);
                $injector.invoke(function ($compile, $rootScope) {
                    $compile($("#" + id))($rootScope);
                    $rootScope.$digest();
                });

                // 3.初始化scope
                var newScope = $("#" + id).scope();
                newScope.$apply(function () {
                    newScope.deviceType = type;
                    newScope.deviceRid = rid;
                    newScope.rack = cabinet;
                    newScope.subrack = subrack;
                    newScope.description = description;

                });
            });
</script>