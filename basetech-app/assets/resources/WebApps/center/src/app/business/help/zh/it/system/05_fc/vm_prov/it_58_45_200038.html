
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="zh-cn" xml:lang="zh-cn">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">
<meta name="copyright" content="(C) 版权 2005">
<meta name="DC.rights.owner" content="(C) 版权 2005">
<meta name="DC.Type" content="OPI">
<meta name="DC.Title" content="配置虚拟机规格属性（Windows）">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="it_58_45_200038">
<meta name="DC.Language" content="zh-cn">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/commonltr.css">
<title>配置虚拟机规格属性（Windows）</title>
<script type="text/javascript" language="JavaScript">
//<![CDATA[
function reDo() {
  if (innerWidth != origWidth || innerHeight != origHeight)
     location.reload();
}
if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
	origWidth = innerWidth;
	origHeight = innerHeight;
	onresize = reDo;
}
onerror = null; 
//]]>
</script>
<style type="text/css">
<!--
div.WebHelpPopupMenu { position:absolute;
left:0px;
top:0px;
z-index:4;
visibility:hidden; }
-->
</style>
<script type="text/javascript" language="javascript1.2" src="../../whmsg.js"></script>
<script type="text/javascript" language="javascript" src="../../whver.js"></script>
<script type="text/javascript" language="javascript1.2" src="../../whproxy.js"></script>
<script type="text/javascript" language="javascript1.2" src="../../whutils.js"></script>
<script type="text/javascript" language="javascript1.2" src="../../whlang.js"></script>
<script type="text/javascript" language="javascript1.2" src="../../whtopic.js"></script>

 <meta name="generator" content="Adobe RoboHelp 9">
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><script type="text/javascript" language="javascript1.2">//<![CDATA[
<!--
if (window.gbWhTopic)
{
	var strUrl = decodeURI(document.location.href);
	var bc = 0;
	var n = strUrl.toLowerCase().indexOf("bc-");
	if(n != -1)
	{
		document.location.href = encodeURI(strUrl.substring(0, n));
		bc = strUrl.substring(n+3);
	}

	if (window.addTocInfo)
	{
	addTocInfo("FAQ\n虚拟机管理\n配置虚拟机规格属性（Windows）");
addButton("show",BTN_TEXT,"显示","","","","",0,0,"","","");

	}
	if (window.writeBtnStyle)
		writeBtnStyle();

	if (window.writeIntopicBar)
		writeIntopicBar(1);

	
	document.write("<p style=\"text-align:right\"> ");
AddMasterBreadcrumbs("../../Help_Admin_System.htm", "", ">", "Home", "../../07_fm/father_node/it_60_99_start.html");
document.write("<a href=\"../../07_fm/father_node/it_60_99_faq.html\">FAQ<\/a> > <a href=\"../../07_fm/father_node/it_60_99_100032.html\">虚拟机管理<\/a> > 配置虚拟机规格属性（Windows）<\/p>");


	if (window.setRelStartPage)
	{
	setRelStartPage("../../Help_Admin_System.htm");

		autoSync(1);
		sendSyncInfo();
		sendAveInfoOut();
	}
}
else
	if (window.gbIE4)
		document.location.reload();

//-->
//]]></script><a name="it_58_45_200038"></a><a name="it_58_45_200038"></a>


<h1 class="topictitle1">配置虚拟机规格属性（Windows）</h1>
<ul><li><a href="#it_58_45_200038__1.2.1">操作场景</a></li><li><a href="#it_58_45_200038__1.2.2">必备事项</a></li><li><a href="#it_58_45_200038__1.2.3">操作步骤</a></li></ul>
<div>
<div class="Section"><a name="it_58_45_200038__1.2.1"></a><a name="1.2.1"></a><h2 class="sectiontitle"><a href="#it_58_45_200038" class="sectiontitle2contents">操作场景</a></h2>
<div class="Sectionbody"><div class="p" id="it_58_45_200038__pass5"><a name="it_58_45_200038__pass5"></a><a name="pass5"></a>当按照虚拟机模板创建的各虚拟机需均具备如下功能时，则需要配置虚拟机规格属性。<ul><li>有不同的初始密码</li><li>能够自定义计算机名称</li><li>虚拟机与主机时钟同步</li><li>能够以静态注入的方式自动获取IP地址</li></ul>
</div>
<div class="note"><img src="../../public_sys-resources/icon-note.gif"><span class="notetitle"> 说明： </span><div class="notebody"><p><span><strong>高危特性声明</strong>：该功能使用过程中可能触及最终用户数据，符合业界惯例，但仍须谨慎使用。</span></p>
<p>该操作需修改用户虚拟机注册表，如果涉及虚拟机中的用户数据，请在获得虚拟机用户许可后执行该操作。</p>
</div></div>
<div class="p" id="it_58_45_200038__pass3"><a name="it_58_45_200038__pass3"></a><a name="pass3"></a>以下场景时无需进行该配置：<ul><li><p>当虚拟化环境是VMware时，无需进行配置。</p>
</li><li><p id="it_58_45_200038__pass2"><a name="it_58_45_200038__pass2"></a><a name="pass2"></a>如果不需使用随机密码或自定义虚拟机的规格属性功能，则可不进行该配置。</p>
</li><li>虚拟机的操作系统类型为Windows 2000 Server SP4或Windows 2000 Advanced Server
SP4时，不支持该功能，无需进行配置。</li><li>已配置虚拟机的SID时，无需进行配置。因为配置虚拟机的SID的步骤中已包含该配置。</li></ul>
</div>
</div></div>

<div class="Section"><a name="it_58_45_200038__1.2.2"></a><a name="1.2.2"></a><h2 class="sectiontitle"><a href="#it_58_45_200038" class="sectiontitle2contents">必备事项</a></h2>
<div class="Sectionbody">
<div style="padding-left: 15px;">
<span><p class="sectiontitle">前提条件</p></span><p>虚拟机已安装操作系统和Tools。</p>
<div class="p"><ul><li><p>虚拟机已安装操作系统和Tools。</p>
</li><li>虚拟机未配置SID。</li></ul>
</div>

</div>
</div></div>

<div class="Section"><a name="it_58_45_200038__1.2.3"></a><a name="1.2.3"></a><h2 class="sectiontitle"><a href="#it_58_45_200038" class="sectiontitle2contents">操作步骤</a></h2>
<div class="Sectionbody">
<ul><a name="it_58_45_200038__delete"></a><a name="delete"></a><div class="HandlingTitled" id="it_58_45_200038__delete"><p class="sectiontitle">删除历史文件</p>
<div class="Steps-titled"><ol type="1" start="1"><li id="it_58_45_200038__sid"><a name="it_58_45_200038__sid"></a><a name="sid"></a><span>在VNC登录窗口的虚拟机操作系统界面，启用administrator用户，并删除其他用户。</span>
</li><li><span>检查在虚拟机的C盘根目录下，是否存在<span class="filepath">“setpass.vbs”</span>文件。</span>
<p>若存在该文件，需将该文件手动删除。</p>
</li></ol></div>
</div>
<div class="HandlingTitled"><p class="sectiontitle">修改注册表</p>
<div class="Steps-titled"><ol type="1" start="3"><li id="it_58_45_200038__regedit"><a name="it_58_45_200038__regedit"></a><a name="regedit"></a><span>在VNC登录窗口的虚拟机操作系统界面，单击<span class="uicontrol">“开始”</span>，在下方搜索栏中输入<span class="parmvalue">“regedit”</span>，按<span class="uicontrol">“Enter”</span>。</span>
<p>弹出对话框。</p>
</li><li><span>选择<span class="menucascade">“<span class="uicontrol">HKEY_LOCAL_MACHINE</span> &gt; <span class="uicontrol">SOFTWARE</span> &gt; <span class="uicontrol">Microsoft</span> &gt; <span class="uicontrol">Windows NT</span> &gt; <span class="uicontrol">CurrentVersion</span> &gt; <span class="uicontrol">Winlogon</span>”</span>。</span>
<p>显示<span class="parmname">“Winlogon”</span>下所有的注册表项。</p>
</li><li><span>检查注册表项中是否有<span class="parmname">“DefaultUserName”</span>、<span class="parmname">“DefaultPassword”</span>和<span class="parmname">“AutoAdminLogon”</span>。</span>
<p><ul><li>是，执行<a href="#it_58_45_200038__step_21">9</a>。</li><li>否，执行<a href="#it_58_45_200038__step_20">6</a>。</li></ul>
</p>
</li><li id="it_58_45_200038__step_20"><a name="it_58_45_200038__step_20"></a><a name="step_20"></a><span>选择<span class="menucascade">“<span class="uicontrol">编辑</span> &gt; <span class="uicontrol">新建</span> &gt; <span class="uicontrol">字符串值</span>”</span>。</span>
<p>右侧窗口显示缺省名称<span class="uicontrol">“新值 #1”</span>。</p>
</li><li id="it_58_45_200038__rename"><a name="it_58_45_200038__rename"></a><a name="rename"></a><span>右键单击<span class="uicontrol">“新值 #1”</span>，选择<span class="uicontrol">“重命名”</span>。</span>
<p>将生成的缺省名称<span class="parmname">“新值 #1”</span>重命名为<span class="parmname">“DefaultUserName”</span>。</p>
</li><li><span>重复执行<a href="#it_58_45_200038__step_20">6</a>～<a href="#it_58_45_200038__rename">7</a>，依次重命名<span class="parmname">“DefaultPassword”</span>和<span class="parmname">“AutoAdminLogon”</span>。</span></li><li id="it_58_45_200038__step_21"><a name="it_58_45_200038__step_21"></a><a name="step_21"></a><span>依次双击<span class="parmname">“DefaultUserName”</span>、<span class="parmname">“DefaultPassword”</span>、<span class="parmname">“AutoAdminLogon”</span>注册表项名称，在弹出对话框的<span class="wintitle">“数值数据”</span>中，分别输入<span class="parmvalue">“Administrator”</span>、当前虚拟机<span class="parmvalue">“Administrator”</span>帐号的密码、<span class="parmvalue">“1”</span>。</span>
<p><div class="note"><img src="../../public_sys-resources/icon-note.gif"><span class="notetitle"> 说明： </span><div class="notebody">当前虚拟机未设置<span class="parmvalue">“Administrator”</span>的密码时，无需设置<span class="parmname">“DefaultPassword”</span>的值。</div></div>
</p>
</li><li><span>如果注册表项中有<span class="parmname">“AutoLogonCount”</span>，删除该项。</span>
</li><li><span>单击<span class="uicontrol">“确定”</span>。</span>
<p>关闭对话框。</p>
</li><li id="it_58_45_200038__unfold"><a name="it_58_45_200038__unfold"></a><a name="unfold"></a><span>展开<span class="menucascade">“<span class="uicontrol">HKEY_LOCAL_MACHINE</span> &gt; <span class="uicontrol">SOFTWARE</span> &gt; <span class="uicontrol">Microsoft</span> &gt; <span class="uicontrol">Windows</span> &gt; <span class="uicontrol">CurrentVersion</span> &gt; <span class="uicontrol">Run</span>”</span>。</span>
<p>显示<span class="parmname">“Run”</span>下所有的注册表项。</p>
</li><li id="it_58_45_200038__unfold2"><a name="it_58_45_200038__unfold2"></a><a name="unfold2"></a><span>双击<span class="parmname">“(默认)”</span>。</span>
<p>弹出对话框。</p>
</li><li id="it_58_45_200038__unfold3"><a name="it_58_45_200038__unfold3"></a><a name="unfold3"></a><span>在数值数据项中，输入<span class="parmvalue">“c:\setpass.vbs”</span>。</span></li><li id="it_58_45_200038__unfold4"><a name="it_58_45_200038__unfold4"></a><a name="unfold4"></a><span>单击<span class="uicontrol">“确定”</span>。</span>
<p>关闭对话框。</p>
</li><li><span>该虚拟机的<span class="parmname">“时钟策略”</span>是否为<span class="parmvalue">“与主机时钟同步”</span>？</span>
<p><ul><li>是，执行<a href="#it_58_45_200038__settime">17</a>。</li><li>否，操作结束。</li></ul>
</p>
</li><li id="it_58_45_200038__settime"><a name="it_58_45_200038__settime"></a><a name="settime"></a><span>展开<span class="menucascade">“<span class="uicontrol">HKEY_LOCAL_MACHINE</span> &gt; <span class="uicontrol">SYSTEM</span> &gt; <span class="uicontrol">Setup</span> &gt; <span class="uicontrol">HuaweiPV</span>”</span>。</span></li><li><span>删除<span class="filepath">“SetTime”</span>。</span></li></ol></div>
</div>
</ul>

</div></div>

</div>


<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">华为专有和保密信息</div><div class="hwcopyright">版权所有 &copy; 华为技术有限公司</div><script type="text/javascript" language="javascript1.2">//<![CDATA[
<!--
if (window.writeIntopicBar)
	writeIntopicBar(0);


highlightSearch();
//-->
//]]></script>
</body>
</html>