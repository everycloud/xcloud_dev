
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="DC.Type" content="OPI">
<meta name="DC.Title" content="Configuring Linux VM Network Attributes">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="it_58_45_200040">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/commonltr.css">
<title>Configuring Linux VM Network Attributes</title>
<script type="text/javascript" language="JavaScript">
//<![CDATA[
function reDo() {
  if (innerWidth != origWidth || innerHeight != origHeight)
     location.reload();
}
if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
	origWidth = innerWidth;
	origHeight = innerHeight;
	onresize = reDo;
}
onerror = null; 
//]]>
</script>
<style type="text/css">
<!--
div.WebHelpPopupMenu { position:absolute;
left:0px;
top:0px;
z-index:4;
visibility:hidden; }
-->
</style>
<script type="text/javascript" language="javascript1.2" src="../../whmsg.js"></script>
<script type="text/javascript" language="javascript" src="../../whver.js"></script>
<script type="text/javascript" language="javascript1.2" src="../../whproxy.js"></script>
<script type="text/javascript" language="javascript1.2" src="../../whutils.js"></script>
<script type="text/javascript" language="javascript1.2" src="../../whlang.js"></script>
<script type="text/javascript" language="javascript1.2" src="../../whtopic.js"></script>

 <meta name="generator" content="Adobe RoboHelp 9">
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><script type="text/javascript" language="javascript1.2">//<![CDATA[
<!--
if (window.gbWhTopic)
{
	var strUrl = decodeURI(document.location.href);
	var bc = 0;
	var n = strUrl.toLowerCase().indexOf("bc-");
	if(n != -1)
	{
		document.location.href = encodeURI(strUrl.substring(0, n));
		bc = strUrl.substring(n+3);
	}

	if (window.addTocInfo)
	{
	addTocInfo("FAQ\nVM Management\nConfiguring Linux VM Network Attributes");
addButton("show",BTN_TEXT,"Show","","","","",0,0,"","","");

	}
	if (window.writeBtnStyle)
		writeBtnStyle();

	if (window.writeIntopicBar)
		writeIntopicBar(1);

	
	document.write("<p style=\"text-align:right\"> ");
AddMasterBreadcrumbs("../../Help_Admin_System.htm", "", ">", "Home", "../../07_fm/father_node/it_60_99_start.html");
document.write("<a href=\"../../07_fm/father_node/it_60_99_faq.html\">FAQ<\/a> > <a href=\"../../07_fm/father_node/it_60_99_100032.html\">VM Management<\/a> > Configuring Linux VM Network Attributes<\/p>");


	if (window.setRelStartPage)
	{
	setRelStartPage("../../Help_Admin_System.htm");

		autoSync(1);
		sendSyncInfo();
		sendAveInfoOut();
	}
}
else
	if (window.gbIE4)
		document.location.reload();

//-->
//]]></script><a name="it_58_45_200040"></a><a name="it_58_45_200040"></a>


<h1 class="topictitle1">Configuring Linux VM Network Attributes</h1>
<ul><li><a href="#it_58_45_200040__1.2.1">Scenarios</a></li><li><a href="#it_58_45_200040__1.2.2">Prerequisites</a></li><li><a href="#it_58_45_200040__1.2.3">Procedure</a></li></ul>

<div>
<div class="Section"><a name="it_58_45_200040__1.2.1"></a><a name="1.2.1"></a><h2 class="sectiontitle"><a href="#it_58_45_200040" class="sectiontitle2contents">Scenarios</a></h2>
<div class="Sectionbody"><div class="p" id="it_58_45_200040__netcard"><a name="it_58_45_200040__netcard"></a><a name="netcard"></a>Configure network attributes for a
Linux VM<span> or a VM template</span>. If the
Linux VM is converted to a template to create other VMs<span> or the VM template is being created</span>, this configuration is required in the following scenarios:<a name="it_58_45_200040__scenarios"></a><a name="scenarios"></a><ul id="it_58_45_200040__scenarios"><li>The created VMs require manual IP address configuration, and the
VM template runs a Red Flag operating system (OS).</li><li>The created VMs automatically obtain IP addresses using the Dynamic
Host Configuration Protocol (DHCP), and the VM template runs the Linux
OS. This configuration, including activating NIC and enabling DHCP
service, enables the created VMs to access networks and automatically
obtain dynamic IP addresses.</li><li>The created VMs automatically
obtain IP addresses in static injection mode, and the VM template
runs the Linux OS excluding CentOS. This configuration, that is, configuring
the network installation mode to ifup, ensures that the created VMs
can automatically obtain the IP addresses assigned by the system.</li></ul>
</div>
<p>This section uses SUSE Linux11 SP1 OS as an example to
describe how to configure network attributes for a Linux VM. For details
about the configuration methods for other OSs, see product documents
for the target OS.</p>
</div></div>

<div class="Section"><a name="it_58_45_200040__1.2.2"></a><a name="1.2.2"></a><h2 class="sectiontitle"><a href="#it_58_45_200040" class="sectiontitle2contents">Prerequisites</a></h2>
<div class="Sectionbody">
<div style="padding-left: 15px;">
<span><p class="sectiontitle">Conditions</p></span><ul><li><p>The OS and the Tools have been installed on the VM.</p>
</li><li><p>If the VMs created using a template need to be assigned IP
addresses automatically by the DHCP server, the <span class="filepath"><b>FusionCompute
V100R005C00SPC200_GuestOSDrivers.zip</b></span> software package has been downloaded and the <span class="filepath"><b>FusionCompute
V100R005C00SPC200_Customization.iso</b></span> has been obtained from the decompressed package.</p>
<div class="p">To obtain the software package <ul><li><span>For enterprise
users, visit <span class="uicontrol"><b>http://support.huawei.com/enterprise</b></span> and choose <span class="menucascade" id="it_58_45_200040__d63e90"><a name="it_58_45_200040__d63e90"></a><a name="d63e90"></a><b><span class="uicontrol">Software</span></b> &gt; <b><span class="uicontrol">IT</span></b> &gt; <b><span class="uicontrol">FusionCloud</span></b> &gt; <b><span class="uicontrol">FusionSphere</span></b> &gt; <b><span class="uicontrol">FusionCompute</span></b> &gt; <b><span class="uicontrol">V100R005C00SPC100</span></b></span>.</span></li><li><span>For telecom carrier
users, visit <span class="uicontrol"><b>http://support.huawei.com</b></span> and
choose <span class="menucascade" id="it_58_45_200040__d63e112"><a name="it_58_45_200040__d63e112"></a><a name="d63e112"></a><b><span class="uicontrol">Software</span></b> &gt; <b><span class="uicontrol">Carrier Software &amp; Core Network </span></b> &gt; <b><span class="uicontrol">Carrier Cloud Computing</span></b> &gt; <b><span class="uicontrol">IT Cloud Infrastructure
Solution</span></b> &gt; <b><span class="uicontrol">Cloud OS</span></b> &gt; <b><span class="uicontrol">FusionCompute</span></b> &gt; <b><span class="uicontrol">V100R005C00SPC100</span></b></span>.</span></li></ul>
</div>
</li></ul>

</div>
</div></div>

<div class="Section"><a name="it_58_45_200040__1.2.3"></a><a name="1.2.3"></a><h2 class="sectiontitle"><a href="#it_58_45_200040" class="sectiontitle2contents">Procedure</a></h2>
<div class="Sectionbody">
<ul><div class="HandlingTitled"><p class="sectiontitle">Delete files in the network rule directory.</p>
<div class="Steps-titled"><ol type="1" start="1"><li id="it_58_45_200040__set_inic"><a name="it_58_45_200040__set_inic"></a><a name="set_inic"></a><span>Run the following command to view the
files in the network rule directory:</span>
<p><b><span class="cmdname">ls -l /etc/udev/rules.d</span></b></p>
</li><li><span>Run the following commands to delete the rule files
whose file names contain <strong>persistent</strong> and <strong>net</strong> in the network
rule directory:</span>
<p>The following commands are examples:<p><b><span class="cmdname">rm /etc/udev/rules.d/</span></b><em>30-</em><b><span class="cmdname">net_persistent</span></b><em>-names</em><b><span class="cmdname">.rules</span></b></p>
<p><b><span class="cmdname">rm /etc/udev/rules.d/</span></b><em>70-</em><b><span class="cmdname">persistent-net.rules</span></b> //The italic contents
in the command vary depending on the actual service environment.</p>
</p>
</li></ol></div>
</div>
<div class="HandlingTitled"><p class="sectiontitle">Determine the configuration requirements.</p>
<div class="Steps-titled"><ol type="1" start="3"><li><span>Perform the required operation based on the network
requirements and the VM OS type.</span>
<p><ul><li>If the VM created using a template requires a manual-configured
IP address and the VM runs a non-Red Flag OS, network attribute configuration
is not required. You do not need to proceed with the subsequent steps.</li><li>If the VM created using a template requires a manual-configured
IP address and the VM runs a Red Flag OS, go to <a href="#it_58_45_200040__redflag">4</a> to configure VM NICs.</li><li><p>If the VM created using a template automatically obtains IP
addresses using DHCP, go to <a href="#it_58_45_200040__set2">9</a> to configure
VM NICs.</p>
<p>If the VM software is deployed in automatic mode, automatic
IP address assignment using DHCP is recommended for the VM.</p>
</li><li>If the VM created
using a template automatically obtains IP addresses in static injection
mode, go to <a href="#it_58_45_200040__ifup">12</a>.</li></ul>
</p>
</li></ol></div>
</div>
<div class="HandlingTitled"><p class="sectiontitle">Configure the Red Flag VM.</p>
<div class="Steps-titled"><ol type="1" start="4"><li id="it_58_45_200040__redflag"><a name="it_58_45_200040__redflag"></a><a name="redflag"></a><span>Run the following command on the Red Flag
VM to switch to the directory containing the VM NIC information:</span>
<p><b><span class="cmdname">cd /etc/sysconfig/network-scripts</span></b></p>
</li><li><span>Run the following command to open the NIC configuration
file:</span>
<p><b><span class="cmdname">vi ifcfg-ethXX</span></b></p>
<p>For example, Run the <b><span class="cmdname">vi /etc/sysconfig/network/ifcfg-eth0</span></b> command to open the configuration file of NIC eth0.</p>
<p><div class="note"><img src="../../public_sys-resources/icon-note.gif"><span class="notetitle"> NOTE: </span><div class="notebody">The following steps use NIC eth0 as an example
to describe how to configure a NIC for a Red Flag VM. If the VM has
multiple NICs, perform the following steps for each NIC configuration
file.</div></div>
</p>
</li><li id="it_58_45_200040__net04"><a name="it_58_45_200040__net04"></a><a name="net04"></a><span>Press <b><span class="cmdname">i</span></b> to enter editing
mode.</span></li><li><span>Delete all information in the row where the MAC address
is displayed.</span>
<p>For example, delete <strong>HWADDR=28:6E:D4:88:C6:2C</strong>.</p>
</li><li><span id="it_58_45_200040__cmd_quit"><a name="it_58_45_200040__cmd_quit"></a><a name="cmd_quit"></a>Press <span class="uicontrol"><b>Esc</b></span> and enter <b><span class="cmdname">:wq</span></b> to save the configuration and exit the vi editor.</span>
<p>No further action is required.</p>
</li></ol></div>
</div>
<div class="HandlingTitled"><p class="sectiontitle">Back up the configuration file of the
original NIC and create the configuration file of the new NIC.</p>
<div class="Steps-titled"><ol type="1" start="9"><li id="it_58_45_200040__set2"><a name="it_58_45_200040__set2"></a><a name="set2"></a><span>Mount the obtained <span class="filepath"><b>FusionCompute
V100R005C00SPC200_Customization.iso</b></span> file to the VM.</span>

</li><li><span>Copy the <span class="filepath"><b>linux</b></span> folder in the image
to the <span class="filepath"><b>/home</b></span> directory on the VM.</span>
<p>If the VM provides a graphical user interface (GUI), simply
copy the folder. If the VM provides only a command-line interface
(CLI), use the specified command to copy the folder, For details about
the operations of running commands, see <a href="it_58_45_200032.html#it_58_45_200032__mkdir">3</a> to <a href="it_58_45_200032.html#it_58_45_200032__copyfile">7</a> in <a href="it_58_45_200032.html">Installing the Tools on a Linux VM</a>.</p>
</li><li><span>Run the following command to back up the configuration
file of the original NIC and create the configuration file of the
new NIC: </span>
<p><b><span class="cmdname">sh /home/linux/autoConfigLinuxNetwork.sh /etc/sysconfig/network</span></b></p>
<p><div class="note"><img src="../../public_sys-resources/icon-note.gif"><span class="notetitle"> NOTE: </span><div class="notebody">The path in the preceding command varies depending on
the VM OS. Generally, the directory is:<ul><li>SUSE series: <span class="filepath"><b>/etc/sysconfig/network/</b></span></li><li>Red Hat/Oracle/Fedora/CentOS series: <span class="filepath"><b>/etc/sysconfig/network-scripts/</b></span></li><li>Ubuntu/Debian series: <span class="filepath"><b>/etc/network/interfaces</b></span></li></ul>
</div></div>
</p>
<p>If the following information is displayed, the command is executed
successfully:<pre class="screen">backup old config files ...
create new config files ...
done !!!</pre>
</p>
</li></ol></div>
</div>
<div class="HandlingTitled"><p class="sectiontitle">Set the network configuration method.</p>
<p><div class="p">Commonly there are two methods of network configuration for
a Linux VM, which are as follows:<ul><li>NetworkManager: automatic network configuration function provided
by a Linux OS</li><li>Traditional method using ifup</li></ul>
</div>
<p>The essential of enabling a VM to automatically obtain
IP addresses in static injection mode is to overwrite the VM network
configuration file using the custom configuration file during VM creation.
Therefore, setting the Linux OS network configuration file is actually
to disable the Linux NetworkManager function and then use the custom
configuration file to overwrite the VM network configuration file.</p>
</p><div class="Steps-titled"><ol type="1" start="12"><li id="it_58_45_200040__ifup"><a name="it_58_45_200040__ifup"></a><a name="ifup"></a><span>Run the following command on the VM to enter
the control center:</span>
<p><b><span class="cmdname">yast</span></b></p>
</li><li><span>Choose <span class="menucascade"><b><span class="uicontrol">Network Devices</span></b> &gt; <b><span class="uicontrol">Network Settings</span></b></span>.</span></li><li><span>On the <span class="wintitle"><b>Network Settings</b></span> page, press <b><span class="cmdname">Alt</span></b>+<b><span class="cmdname">G</span></b>.</span>
<p>The <span class="wintitle"><b>Global Options</b></span> page is displayed.<div class="note"><img src="../../public_sys-resources/icon-note.gif"><span class="notetitle"> NOTE: </span><div class="notebody"><p>If the shortcut keys provided in the steps do not take
effect in practice due to OS version or language diversities, use <span class="uicontrol"><b>Tab</b></span>, <span class="uicontrol"><b>←</b></span>, and <span class="uicontrol"><b>→</b></span> keys to select the required options.</p>
</div></div>
</p>
</li><li><span>Press <b><span class="cmdname">Alt</span></b>+<b><span class="cmdname">T</span></b> and
select <span class="uicontrol"><b>Traditional Method with ifup</b></span>.</span>
</li><li><span>Press <b><span class="cmdname">F10</span></b> to save the configuration
and exit the control center.</span></li></ol></div>
</div>
</ul>

</div></div>

</div>


<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">Huawei Proprietary and Confidential</div><div class="hwcopyright">Copyright &copy; Huawei Technologies Co., Ltd.</div><script type="text/javascript" language="javascript1.2">//<![CDATA[
<!--
if (window.writeIntopicBar)
	writeIntopicBar(0);


highlightSearch();
//-->
//]]></script>
</body>
</html>