
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">
<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="VXLAN">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="it_60_51_000009">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/commonltr.css">
<title>VXLAN</title>
<script type="text/javascript" language="JavaScript">
//<![CDATA[
function reDo() {
  if (innerWidth != origWidth || innerHeight != origHeight)
     location.reload();
}
if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
	origWidth = innerWidth;
	origHeight = innerHeight;
	onresize = reDo;
}
onerror = null; 
//]]>
</script>
<style type="text/css">
<!--
div.WebHelpPopupMenu { position:absolute;
left:0px;
top:0px;
z-index:4;
visibility:hidden; }
-->
</style>
<script type="text/javascript" language="javascript1.2" src="../../whmsg.js"></script>
<script type="text/javascript" language="javascript" src="../../whver.js"></script>
<script type="text/javascript" language="javascript1.2" src="../../whproxy.js"></script>
<script type="text/javascript" language="javascript1.2" src="../../whutils.js"></script>
<script type="text/javascript" language="javascript1.2" src="../../whlang.js"></script>
<script type="text/javascript" language="javascript1.2" src="../../whtopic.js"></script>

 <meta name="generator" content="Adobe RoboHelp 9">
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><script type="text/javascript" language="javascript1.2">//<![CDATA[
<!--
if (window.gbWhTopic)
{
	var strUrl = decodeURI(document.location.href);
	var bc = 0;
	var n = strUrl.toLowerCase().indexOf("bc-");
	if(n != -1)
	{
		document.location.href = encodeURI(strUrl.substring(0, n));
		bc = strUrl.substring(n+3);
	}

	if (window.addTocInfo)
	{
	addTocInfo("Resource Configuration\nFeature Configuration\nVXLAN");
addButton("show",BTN_TEXT,"Show","","","","",0,0,"","","");

	}
	if (window.writeBtnStyle)
		writeBtnStyle();

	if (window.writeIntopicBar)
		writeIntopicBar(1);

	
	document.write("<p style=\"text-align:right\"> ");
AddMasterBreadcrumbs("../../Help_Admin_System.htm", "", ">", "Home", "../father_node/it_60_99_start.html");
document.write("<a href=\"../father_node/it_60_99_100012.html\">Resource Configuration<\/a> > <a href=\"../father_node/it_60_99_100013.html\">Feature Configuration<\/a> > VXLAN<\/p>");


	if (window.setRelStartPage)
	{
	setRelStartPage("../../Help_Admin_System.htm");

		autoSync(1);
		sendSyncInfo();
		sendAveInfoOut();
	}
}
else
	if (window.gbIE4)
		document.location.reload();

//-->
//]]></script><a name="it_60_51_000009"></a><a name="it_60_51_000009"></a>



<h1 class="topictitle1">VXLAN</h1>
<ul><li><a href="#it_60_51_000009__1.2.1.1">Overview</a></li><li><a href="#it_60_51_000009__1.2.2.1">Principles</a></li><li><a href="#it_60_51_000009__1.2.3.1">Precautions</a></li><li><a href="#it_60_51_000009__1.2.4.1">Software to be prepared</a></li><li><a href="#it_60_51_000009__1.2.5.1">Configuration Process</a></li></ul>
<div>
<div class="section" id="it_60_51_000009__sec_overView"><a name="it_60_51_000009__sec_overView"></a><a name="sec_overView"></a><a name="it_60_51_000009__1.2.1.1"></a><a name="1.2.1.1"></a><h4 class="sectiontitle"><a href="#it_60_51_000009" class="sectiontitle2contents">Overview</a></h4><p id="it_60_51_000009__vxlan1"><a name="it_60_51_000009__vxlan1"></a><a name="vxlan1"></a>Virtual
Extensible Local Area Network (VXLAN) is the virtual Ethernet established
based on the physical network. It uses the layer 3 protocols to encapsulate
layer 2 packets and enables the layer 2 network to extend at the layer
3 network. Compared with the traditionally-used Virtual Local Area
Network (VLAN) technology that supports only a maximum 2<sup>12</sup> isolated virtual networks, VXLAN supports creation of up to about
2<sup>24</sup> isolated virtual networks. Therefore, VXLAN can be
used in large-scale multi-tenant network deployment scenarios where
a large number of VLANs are required.</p>
</div>

<div class="section" id="it_60_51_000009__sec_principle"><a name="it_60_51_000009__sec_principle"></a><a name="sec_principle"></a><a name="it_60_51_000009__1.2.2.1"></a><a name="1.2.2.1"></a><h4 class="sectiontitle"><a href="#it_60_51_000009" class="sectiontitle2contents">Principles</a></h4><p>Two virtual
tunnel end points (VTEPs), residing on the hosts managed by the <span>FusionManager</span>, are required for implementing the VXLAN function. They encapsulates
and decapsulates VXLAN packets, forwards the packets, and learns the
mapping between the MAC address and the IP address of a VM.</p>
<p>As shown in <a href="#it_60_51_000009__fig_vxlan">Figure 1</a>, VM 1 and VM 2 run on
different servers and belong the same VXLAN whose ID is 6000. When
VM 1 attempts to communicate with VM 2, VTEP 1 on host 1 checks the
ID of the VXLAN to which VM 1 belongs and encapsulates frames into
VXLAN packets. Then, VTEP 1 establishes a VXALN tunnel with VTEP 2
on host 2 for packet transmission. Upon receiving the VXLAN packet,
VTEP 2 decapsulates the packet and sends the frame to VM 2.</p>
<div class="fignone" id="it_60_51_000009__fig_vxlan"><a name="it_60_51_000009__fig_vxlan"></a><a name="fig_vxlan"></a><span class="figcap"><b>Figure 1 </b>VXLAN principles</span>

<br><span><img src="fig/fig_it_60_51_000009_02.png"></span></div>
<p>The
gateway of the VXLAN network resides on a software firewall, through
which the one VXLAN network can communicate with another VXLAN network
or VLAN network, as shown in <a href="#it_60_51_000009__fig_gw">Figure 2</a>.</p>
<div class="fignone" id="it_60_51_000009__fig_gw"><a name="it_60_51_000009__fig_gw"></a><a name="fig_gw"></a><span class="figcap"><b>Figure 2 </b>Gateway of a VXLAN network</span>

<br><span><img src="fig/fig_it_60_51_000009_03.png"></span></div>
</div>

<div class="section" id="it_60_51_000009__sec_caution"><a name="it_60_51_000009__sec_caution"></a><a name="sec_caution"></a><a name="it_60_51_000009__1.2.3.1"></a><a name="1.2.3.1"></a><h4 class="sectiontitle"><a href="#it_60_51_000009" class="sectiontitle2contents">Precautions</a></h4><p>Before using
the VXLAN function, pay attention to the following precautions:</p>
<ul><li>The IP address of the VTEP cannot be in the same network segment
as that of other system interfaces on the same host.</li><li>The IP addresses of the VTEP cannot be in the same network segment
as that of other VTEPs in the same host.</li><li>The IP address of the VTEP must be unique.</li></ul>
</div>

<div class="section"><a name="it_60_51_000009__1.2.4.1"></a><a name="1.2.4.1"></a><h4 class="sectiontitle"><a href="#it_60_51_000009" class="sectiontitle2contents">Software to be prepared</a></h4><div class="p">To create a VXLAN
network, obtain the software listed in <a href="#it_60_51_000009__tbl_01">Table 1</a>.
<div class="tablenoborder"><a name="it_60_51_000009__tbl_01"></a><a name="tbl_01"></a><table cellpadding="4" cellspacing="0" summary="" id="it_60_51_000009__tbl_01" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Software</caption>
<thead align="left">
<tr>
<th class="cellrowborder" valign="top" width="23%" id="mcps1.2.4.2.2.2.4.1.1"><p>Name</p>
</th>

<th class="cellrowborder" valign="top" width="35.75%" id="mcps1.2.4.2.2.2.4.1.2"><p>Description</p>
</th>

<th class="cellrowborder" valign="top" width="41.25%" id="mcps1.2.4.2.2.2.4.1.3"><p>How to Obtain</p>
</th>

</tr>

</thead>

<tbody>
<tr>

<td class="cellrowborder" valign="top" width="23%" headers="mcps1.2.4.2.2.2.4.1.1 "><span class="filepath"><b>FusionCompute
V100R005C00SPC200_VSA.zip</b></span></td>

<td class="cellrowborder" valign="top" width="35.75%" headers="mcps1.2.4.2.2.2.4.1.2 "><p>System service VM template. Upon receiving a request for
creating a software firewall, the system automatically uses this template
to create a VM to provide firewall functions.</p>
</td>

<td class="cellrowborder" valign="top" width="41.25%" headers="mcps1.2.4.2.2.2.4.1.3 "><div class="p" id="it_60_51_000009__p_soft1"><a name="it_60_51_000009__p_soft1"></a><a name="p_soft1"></a><ul><li><p>For
enterprise users, visit http://support.huawei.com/enterprise and choose <span class="menucascade"><b><span class="uicontrol">Software</span></b> &gt; <b><span class="uicontrol">IT</span></b> &gt; <b><span class="uicontrol">FusionCloud</span></b> &gt; <b><span class="uicontrol">FusionSphere</span></b> &gt; <b><span class="uicontrol">FusionCompute</span></b> &gt; <b><span class="uicontrol">V100R005C00SPC100</span></b></span>.</p>
</li><li><p>For carrier users,
visit http://support.huawei.com and choose <span class="menucascade"><b><span class="uicontrol">Software</span></b> &gt; <b><span class="uicontrol">Carrier Software &amp; Core Network </span></b> &gt; <b><span class="uicontrol">Carrier Cloud Computing</span></b> &gt; <b><span class="uicontrol">IT Cloud
Infrastructure Solution</span></b> &gt; <b><span class="uicontrol">Cloud OS</span></b> &gt; <b><span class="uicontrol">FusionCompute</span></b> &gt; <b><span class="uicontrol">V100R005C00SPC100</span></b></span>.</p>
</li></ul>
</div>
</td>

</tr>

</tbody>

</table>
</div>
<div class="note"><img src="../../public_sys-resources/icon-note.gif"><span class="notetitle"> NOTE: </span><div class="notebody">Verify the obtained software packages.
For details, see <a href="../soft_inst/it_60_23_000021.html">Verifying Software Packages</a>.</div></div>
</div>
</div>

<div class="section"><a name="it_60_51_000009__1.2.5.1"></a><a name="1.2.5.1"></a><h4 class="sectiontitle"><a href="#it_60_51_000009" class="sectiontitle2contents">Configuration Process</a></h4><p id="it_60_51_000009__vxlan2"><a name="it_60_51_000009__vxlan2"></a><a name="vxlan2"></a>On the <span>FusionManager</span>, you can create VXLAN-type internal networks and routed networks
in a VPC. <a href="#it_60_51_000009__fig_vxlanProcess">Figure 3</a> shows the process
for configuring a VXLAN network.</p>
<div class="fignone" id="it_60_51_000009__fig_vxlanProcess"><a name="it_60_51_000009__fig_vxlanProcess"></a><a name="fig_vxlanProcess"></a><span class="figcap"><b>Figure 3 </b>Process for configuring a VXLAN network</span>

<br><span><img src="fig/fig_it_60_51_000009_01.png"></span></div>
<p><a href="#it_60_51_000009__table_vxlan">Table 2</a> provides descriptions about each task
in the process.</p>

<div class="tablenoborder"><a name="it_60_51_000009__table_vxlan"></a><a name="table_vxlan"></a><table cellpadding="4" cellspacing="0" summary="" id="it_60_51_000009__table_vxlan" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Configuration steps</caption>
<thead align="left">
<tr>
<th class="cellrowborder" valign="top" width="27.333333333333332%" id="mcps1.2.5.5.2.4.1.1"><p>Task</p>
</th>

<th class="cellrowborder" valign="top" width="36.333333333333336%" id="mcps1.2.5.5.2.4.1.2"><p>Description</p>
</th>

<th class="cellrowborder" valign="top" width="36.333333333333336%" id="mcps1.2.5.5.2.4.1.3"><p>Reference</p>
</th>

</tr>

</thead>

<tbody>
<tr>

<td class="cellrowborder" valign="top" width="27.333333333333332%" headers="mcps1.2.5.5.2.4.1.1 "><p>Configure the multicast function on switches.</p>
</td>

<td class="cellrowborder" valign="top" width="36.333333333333336%" headers="mcps1.2.5.5.2.4.1.2 "><p id="it_60_51_000009__p_igmp"><a name="it_60_51_000009__p_igmp"></a><a name="p_igmp"></a>On the aggregation switch and access switch,
enable the layer-3 multicast forwarding and IGMP-SNOOPING functions.</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>To run multicast services, switch IGMP listening
and the device querier must be enabled for the multicast tunnel. These
functions can be enabled in the switch shell. For details, see the
switch configuration guide. </p>
</div></div>
</td>

<td class="cellrowborder" valign="top" width="36.333333333333336%" headers="mcps1.2.5.5.2.4.1.3 "><p>Perform this task on the switch. For details, see <a href="it_60_51_600002.html">Configuring the Multicast Function on Switches</a>.</p>
</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="27.333333333333332%" headers="mcps1.2.5.5.2.4.1.1 "><p>Configure a VTEP network on the FusionCompute.</p>
</td>

<td class="cellrowborder" valign="top" width="36.333333333333336%" headers="mcps1.2.5.5.2.4.1.2 "><p id="it_60_51_000009__p_fcvtep"><a name="it_60_51_000009__p_fcvtep"></a><a name="p_fcvtep"></a>On FusionCompute, configure the VTEP information
for the distributed virtual switch (DVS) uplink.</p>
</td>

<td class="cellrowborder" valign="top" width="36.333333333333336%" headers="mcps1.2.5.5.2.4.1.3 "><p>On FusionCompute, choose <span class="uicontrol"><b>Computing Pool</b></span>, select the target site and cluster, and click <span class="wintitle"><b>Add VXLAN
VTEP in Batches</b></span> in the <span class="wintitle"><b>Operation</b></span> area.</p>
</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="27.333333333333332%" headers="mcps1.2.5.5.2.4.1.1 "><p>Add a VLAN pool.</p>
</td>

<td class="cellrowborder" valign="top" width="36.333333333333336%" headers="mcps1.2.5.5.2.4.1.2 "><div class="p" id="it_60_51_000009__p_vxlanpool"><a name="it_60_51_000009__p_vxlanpool"></a><a name="p_vxlanpool"></a>On <span>FusionManager</span>, add the following VLAN information to the network resources
pool:<ul><li>ID of the VXLAN network. Associate the VLAN pool to the DVS for
which the VTEP information has been configured.</li><li>VLAN ID of the external network that is connected to the software
firewall. Associate the VLAN pool with the DVS.</li></ul>
</div>
</td>

<td class="cellrowborder" valign="top" width="36.333333333333336%" headers="mcps1.2.5.5.2.4.1.3 ">Choose <span class="menucascade"><b><span class="uicontrol">Resource</span></b> &gt; <b><span class="uicontrol">Resource Zones</span></b></span>, select a resource zone,
and choose <span class="menucascade"><b><span class="uicontrol">Network Resource Pools</span></b> &gt; <b><span class="uicontrol">VLAN Pools</span></b></span>.</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="27.333333333333332%" headers="mcps1.2.5.5.2.4.1.1 "><p>Add a VXLAN multicast IP address pool.</p>
</td>

<td class="cellrowborder" valign="top" width="36.333333333333336%" headers="mcps1.2.5.5.2.4.1.2 "><p id="it_60_51_000009__p_mutip"><a name="it_60_51_000009__p_mutip"></a><a name="p_mutip"></a>The IP address in the multicast IP address
pool is used to identify the VXLAN network. When a VM is added to
the VXLAN network, the host on which the VM runs joins the corresponding
multicast group and uses the multicast IP address to receive packets.</p>
</td>

<td class="cellrowborder" valign="top" width="36.333333333333336%" headers="mcps1.2.5.5.2.4.1.3 ">Choose <span class="menucascade"><b><span class="uicontrol">Resource</span></b> &gt; <b><span class="uicontrol">Resource Zones</span></b></span>, select a resource zone,
and choose <span class="menucascade"><b><span class="uicontrol">Network Resource Pools</span></b> &gt; <b><span class="uicontrol">VLAN Pools</span></b></span>.</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="27.333333333333332%" headers="mcps1.2.5.5.2.4.1.1 "><p>Add an external network.</p>
</td>

<td class="cellrowborder" valign="top" width="36.333333333333336%" headers="mcps1.2.5.5.2.4.1.2 "><p>An external network can connect to the software router and provide public IP addresses for VMs associated with the routed network in the VPC. The external networks created on <span>FusionManager</span> must meet the following requirements: its connection mode is subnet (common VLAN), it is connected to the Internet, its subnet IP address assignment mode is static injection, and it
does not contain an IPv6 subnet.</p>
</td>

<td class="cellrowborder" valign="top" width="36.333333333333336%" headers="mcps1.2.5.5.2.4.1.3 ">Choose <span class="menucascade"><b><span class="uicontrol">Resource</span></b> &gt; <b><span class="uicontrol">Resource Zones</span></b></span>, select a resource zone,
and choose <span class="menucascade"><b><span class="uicontrol">Network Resource Pools</span></b> &gt; <b><span class="uicontrol">External Networks</span></b></span>.</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="27.333333333333332%" headers="mcps1.2.5.5.2.4.1.1 "><p>Add a VSA management network.</p>
</td>

<td class="cellrowborder" valign="top" width="36.333333333333336%" headers="mcps1.2.5.5.2.4.1.2 "><div class="p">The VSA management network provides the management plane for system service VMs. It must meet the following requirements:<ul><li>The VSA management network connects to the system management plane.</li><li>The VSA management network VLAN has been added to the DVS created on the FusionCompute hypervisor, but the VLAN is not contained in the <span>FusionManager</span> VLAN pool.</li></ul>
</div>
</td>

<td class="cellrowborder" valign="top" width="36.333333333333336%" headers="mcps1.2.5.5.2.4.1.3 ">Choose <span class="menucascade"><b><span class="uicontrol">Resource</span></b> &gt; <b><span class="uicontrol">Resource Zones</span></b></span>, select a resource zone,
and choose <span class="menucascade"><b><span class="uicontrol">Network Resource Pools</span></b> &gt; <b><span class="uicontrol">VSA Networks</span></b></span></td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="27.333333333333332%" headers="mcps1.2.5.5.2.4.1.1 "><p>Create a VTEP network.</p>
</td>

<td class="cellrowborder" valign="top" width="36.333333333333336%" headers="mcps1.2.5.5.2.4.1.2 "><p id="it_60_51_000009__p_fmvtep"><a name="it_60_51_000009__p_fmvtep"></a><a name="p_fmvtep"></a>The VTEP network assigns IP addresses to software
firewalls. With the IP address, the software firewall can communicate
with the the VTEP on the host.</p>
</td>

<td class="cellrowborder" valign="top" width="36.333333333333336%" headers="mcps1.2.5.5.2.4.1.3 ">Choose <span class="menucascade"><b><span class="uicontrol">Resource</span></b> &gt; <b><span class="uicontrol">Resource Zones</span></b></span>, select a resource zone,
and choose <span class="menucascade"><b><span class="uicontrol">Network Resource Pools</span></b> &gt; <b><span class="uicontrol">VSA Networks</span></b></span></td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="27.333333333333332%" headers="mcps1.2.5.5.2.4.1.1 "><p>Import a VSA VM template.</p>
</td>

<td class="cellrowborder" valign="top" width="36.333333333333336%" headers="mcps1.2.5.5.2.4.1.2 "><p><span>FusionManager</span> can use a VSA VM template to automatically create system service VMs.</p>
</td>

<td class="cellrowborder" valign="top" width="36.333333333333336%" headers="mcps1.2.5.5.2.4.1.3 ">Choose <span class="menucascade"><b><span class="uicontrol">Resource</span></b> &gt; <b><span class="uicontrol">Templates and Specs</span></b> &gt; <b><span class="uicontrol">VM Templates</span></b></span>.</td>

</tr>

</tbody>

</table>
</div>
</div>

</div>


<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">Huawei Proprietary and Confidential</div><div class="hwcopyright">Copyright &copy; Huawei Technologies Co., Ltd.</div><script type="text/javascript" language="javascript1.2">//<![CDATA[
<!--
if (window.writeIntopicBar)
	writeIntopicBar(0);


highlightSearch();
//-->
//]]></script>
</body>
</html>